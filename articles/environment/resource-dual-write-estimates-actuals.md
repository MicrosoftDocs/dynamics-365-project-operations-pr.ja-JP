---
title: プロジェクトの見積もりと実績の統合
description: このトピックは、プロジェクトの見積もりと実績に向けた Project Operations の二重書き込み統合に関する情報を提供します。
author: sigitac
manager: Annbe
ms.date: 4/26/2021
ms.topic: article
ms.prod: ''
ms.service: project-operations
ms.reviewer: kfend
ms.author: sigitac
ms.openlocfilehash: 88df3385fac0a78a827d65a77d3b04c9d6499536
ms.sourcegitcommit: 02f00960198cc78a5e96955a9e4390c2c6393bbf
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/28/2021
ms.locfileid: "5955780"
---
# <a name="project-estimates-and-actuals-integration"></a><span data-ttu-id="2595c-103">プロジェクトの見積もりと実績の統合</span><span class="sxs-lookup"><span data-stu-id="2595c-103">Project estimates and actuals integration</span></span>

<span data-ttu-id="2595c-104">_**適用対象:** リソース/非在庫ベースのシナリオ向け Project Operations_</span><span class="sxs-lookup"><span data-stu-id="2595c-104">_**Applies To:** Project Operations for resource/non-stocked based scenarios_</span></span>

<span data-ttu-id="2595c-105">このトピックは、プロジェクトの見積もりと実績に向けた Project Operations の二重書き込み統合に関する情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="2595c-105">This topic provides information about Project Operations dual-write integration for project estimates and actuals.</span></span>

## <a name="project-estimates"></a><span data-ttu-id="2595c-106">プロジェクト見積もり</span><span class="sxs-lookup"><span data-stu-id="2595c-106">Project estimates</span></span>

<span data-ttu-id="2595c-107">プロジェクトの人件費、経費、材料の見積もりは Microsoft Dataverse で作成、管理され、会計目的で Finance and Operations のアプリに同期されます。</span><span class="sxs-lookup"><span data-stu-id="2595c-107">Project labor, expense, and material estimates are created and maintained in Microsoft Dataverse and synchronized to Finance and Operations apps for accounting purposes.</span></span> <span data-ttu-id="2595c-108">Finance and Operations のアプリでは、作成、更新、削除の操作には対応していません。</span><span class="sxs-lookup"><span data-stu-id="2595c-108">Create, update, and delete operations aren't supported through the Finance and Operations apps.</span></span>

<span data-ttu-id="2595c-109">見積もりを作成するには、プロジェクトの有効な会計の構成が必要です。</span><span class="sxs-lookup"><span data-stu-id="2595c-109">Creating estimates requires a valid accounting configuration for the project.</span></span> <span data-ttu-id="2595c-110">契約品目に関連付けられているプロジェクトには、プロジェクトのコストと収益のプロファイル ルールで定義された有効なプロジェクトのコストと収益のプロファイルが必要です。</span><span class="sxs-lookup"><span data-stu-id="2595c-110">Projects that are associated with contract lines must have a valid project cost and revenue profile defined in the Project cost and revenue profile rules.</span></span> <span data-ttu-id="2595c-111">詳細については、[請求可能なプロジェクトの会計を構成する](../project-accounting/configure-accounting-billable-projects.md#configure-project-cost-and-revenue-profile-rules) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2595c-111">For more information, see [Configure accounting for billable projects](../project-accounting/configure-accounting-billable-projects.md#configure-project-cost-and-revenue-profile-rules).</span></span>

## <a name="labor-estimates"></a><span data-ttu-id="2595c-112">労働力の見積もり</span><span class="sxs-lookup"><span data-stu-id="2595c-112">Labor estimates</span></span>

<span data-ttu-id="2595c-113">労働力の見積もりは、プロジェクト マネージャーまたはリソース マネージャーが作成します。これらのマネージャーは、一般的なリソースまたは名前付きリソースもプロジェクト タスクに割り当てます。</span><span class="sxs-lookup"><span data-stu-id="2595c-113">Labor estimates are created by the Project Manager or Resource manager who also assigns a generic or named resource to the project task.</span></span> <span data-ttu-id="2595c-114">リソース割り当てレコードは、Dataverse の **リソースの割り当て** のタブにある **プロジェクトの詳細** のページで確認できます。</span><span class="sxs-lookup"><span data-stu-id="2595c-114">Resource assignment records can be reviewed on the **Resource Assignments** tab on the **Project Details** page in Dataverse.</span></span> <span data-ttu-id="2595c-115">Dataverse のリソース割り当てレコードは、**時間見積もりに使用する Project Operations 統合エンティティ (msdyn\_resourceassignments)** を使って Finance and Operations のアプリの時間予測レコードを作成します。</span><span class="sxs-lookup"><span data-stu-id="2595c-115">Resource assignment records in Dataverse create hour forecast records in Finance and Operations apps using **Project Operations integration entity for hour estimates (msdyn\_resourceassignments)**.</span></span>

   ![労働力の見積もりを統合する](./Media/DW4LaborEstimates.png)

<span data-ttu-id="2595c-117">二重書き込みでは、リソースの割り当てレコードをステージング テーブル (**ProjCDSEstimateHoursImport**) に同期させた後、ビジネス ロジックを使って時間予測レコード (**ProjForecastEmpl**) を作成、更新します。</span><span class="sxs-lookup"><span data-stu-id="2595c-117">Dual-write synchronizes resource assignment records to the staging table (**ProjCDSEstimateHoursImport**), and then uses business logic to create and update hour forecast records (**ProjForecastEmpl**).</span></span>

<span data-ttu-id="2595c-118">プロジェクトの会計士は、Finance and Operations アプリで作成された予測時間の記録を次にアクセスして確認します: **プロジェクト管理と会計** > **すべてのプロジェクト** > **計画** > **時間予測**。</span><span class="sxs-lookup"><span data-stu-id="2595c-118">The Project accountant reviews forecast hour records created in Finance and Operations apps by going to **Project management and accounting** > **All projects** > **Plan** > **Hour forecasts**.</span></span>

## <a name="expense-estimates"></a><span data-ttu-id="2595c-119">経費の見積もり</span><span class="sxs-lookup"><span data-stu-id="2595c-119">Expense estimates</span></span>

<span data-ttu-id="2595c-120">経費の見積もりは、プロジェクト マネージャーがDataverse の **プロジェクトの詳細** ページの **経費の見積もり** タブで作成します。</span><span class="sxs-lookup"><span data-stu-id="2595c-120">Expense estimates are created by the Project manager on the **Expense Estimates** tab on the **Project Details** page in Dataverse.</span></span> <span data-ttu-id="2595c-121">経費の見積もり記録は、Dataverse の **見積もり明細** エンティティに保存されます。</span><span class="sxs-lookup"><span data-stu-id="2595c-121">Expense estimate records are stored in the **Estimate Line** entity in Dataverse.</span></span> <span data-ttu-id="2595c-122">これらの見積もりレコードは、トランザクション クラス **費用** を持ち、Finance and Operations アプリの経費予測レコードに **Project Operations の費用見積もりの統合エンティティ (msdyn\_estimatelines)** を使って同期されます。</span><span class="sxs-lookup"><span data-stu-id="2595c-122">These estimate records have transaction class, **Expense** and are synchronized to expense forecast records in Finance and Operations apps using **Project Operations integration entity for expense estimates (msdyn\_estimatelines)**.</span></span>

   ![経費の見積もりを統合する](./Media/DW4ExpenseEstimates.png)

<span data-ttu-id="2595c-124">二重書き込みでは、経費の見積もりレコードをステージング テーブル (**ProjCDSEstimateExpenseImport**) に同期させた後、ビジネス ロジックを使って経費予測レコード (**ProjForecastCost**) を作成、更新します。</span><span class="sxs-lookup"><span data-stu-id="2595c-124">Dual-write synchronizes expense estimate records to the staging table, **ProjCDSEstimateExpenseImport)** and then uses business logic to create and update expense forecast records (**ProjForecastCost**).</span></span> <span data-ttu-id="2595c-125">見積もり明細には、売上の見積もりと原価の見積もりレコードが別々に格納されます。</span><span class="sxs-lookup"><span data-stu-id="2595c-125">Estimate lines store sales estimate and cost estimate records separately.</span></span> <span data-ttu-id="2595c-126">Finance and Operations アプリのビジネス ロジックは、ステージング テーブルのこの詳細を使用して、ひとつの経費予測レコードを生成します。</span><span class="sxs-lookup"><span data-stu-id="2595c-126">The business logic in Finance and Operations apps populates a single Expense forecast record using this detail in the staging table.</span></span>

<span data-ttu-id="2595c-127">プロジェクトの会計士は、Finance and Operations アプリの経費予測レコードを次にアクセスして確認できます: **プロジェクト管理と会計** > **すべてのプロジェクト** > **計画** > **経費予測**。</span><span class="sxs-lookup"><span data-stu-id="2595c-127">The Project accountant can review expense forecast records in Finance and Operations apps by going to **Project management and accounting** > **All projects** > **Plan** > **Expense forecasts**.</span></span>

## <a name="material-estimates"></a><span data-ttu-id="2595c-128">材料の見積もり</span><span class="sxs-lookup"><span data-stu-id="2595c-128">Material estimates</span></span>

<span data-ttu-id="2595c-129">材料の見積もりは、プロジェクト マネージャーがDataverse の **プロジェクトの詳細** ページの **材料の見積もり** タブで作成します。</span><span class="sxs-lookup"><span data-stu-id="2595c-129">Material estimates are created by the Project manager on the **Material Estimates** tab on the **Project Details** page in Dataverse.</span></span> <span data-ttu-id="2595c-130">材料の見積もり記録は、Dataverse の **見積もり明細** エンティティに保存されます。</span><span class="sxs-lookup"><span data-stu-id="2595c-130">Material estimate records are stored in the **Estimate Line** entity in Dataverse.</span></span> <span data-ttu-id="2595c-131">これらの見積もりレコードは、トランザクション クラス **材料** を持ち、Finance and Operations アプリの品目予測レコードに **Project 統合テーブルの素材見積もりの統合エンティティ (msdyn\_estimatelines)** を使って同期されます。</span><span class="sxs-lookup"><span data-stu-id="2595c-131">These estimate records have the transaction class, **Material** and are synchronized to item forecast records in Finance and Operations apps using **Project integration table for material estimates (msdyn\_estimatelines)**.</span></span>

   ![材料の見積もりを統合する](./Media/DW4MaterialEstimates.png)

<span data-ttu-id="2595c-133">二重書き込みでは、材料の見積もりレコードをステージング テーブル (**ProjForecastSalesImpor**) に同期させた後、ビジネス ロジックを使って品目予測レコード (**ForecastSales**) を作成、更新します。</span><span class="sxs-lookup"><span data-stu-id="2595c-133">Dual-write synchronizes material estimate records to the staging table **ProjForecastSalesImpor**, and then uses business logic to create and update item forecast records (**ForecastSales**).</span></span> <span data-ttu-id="2595c-134">見積もり明細には、売上の見積もりと原価の見積もりレコードが別々に格納されます。</span><span class="sxs-lookup"><span data-stu-id="2595c-134">Estimate lines store sales estimate and cost estimate records separately.</span></span> <span data-ttu-id="2595c-135">Finance and Operations アプリのビジネス ロジックは、ステージング テーブルのこの詳細を使用して、ひとつの品目予測レコードを生成します。</span><span class="sxs-lookup"><span data-stu-id="2595c-135">The business logic in Finance and Operations apps populates a single Item forecast record using this detail in the staging table.</span></span>

<span data-ttu-id="2595c-136">プロジェクトの会計士は、Finance and Operations アプリの品目予測レコードを次にアクセスして確認できます: **プロジェクト管理と会計** > **すべてのプロジェクト** > **計画** > **品目予測**。</span><span class="sxs-lookup"><span data-stu-id="2595c-136">The Project accountant can review item forecast records in Finance and Operations apps by going to **Project management and accounting** > **All projects** > **Plan** > **Item forecasts**.</span></span>

## <a name="project-actuals"></a><span data-ttu-id="2595c-137">プロジェクトの実績</span><span class="sxs-lookup"><span data-stu-id="2595c-137">Project actuals</span></span>

<span data-ttu-id="2595c-138">プロジェクトの実績は Dataverse で作成されます、これは、時間、費用、材料、請求活動に基づきます。</span><span class="sxs-lookup"><span data-stu-id="2595c-138">Project actuals are created in Dataverse, based on time, expense, material, and billing activity.</span></span> <span data-ttu-id="2595c-139">数量、原価、販売価格、プロジェクトなど、これらの取引のすべてのオペレーション属性がこの Dataverse エンティティに取り込まれます。</span><span class="sxs-lookup"><span data-stu-id="2595c-139">All operational attributes of these transactions including quantity, cost price, sales price, and project are captured in this Dataverse entity.</span></span> <span data-ttu-id="2595c-140">詳細については、[実績](../actuals/actuals-overview.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2595c-140">For more information, see [Actuals](../actuals/actuals-overview.md).</span></span> <span data-ttu-id="2595c-141">実際のレコードは、ダウンストリームの会計のための二重書き込みテーブルマップ **Project Operations 統合実績 (msdyn\_actuals)** を使用して Finance and Operations アプリに同期されます。</span><span class="sxs-lookup"><span data-stu-id="2595c-141">Actual records are synchronized to Finance and Operations apps using the dual-write table map **Project Operations integration actuals (msdyn\_actuals)** for downstream accounting.</span></span>

   ![実績の統合](./Media/DW4Actuals.png)

<span data-ttu-id="2595c-143">**Project Operations 統合の実績** テーブルマップは、属性 **同期のスキップ (内部使用のみ)** が **False** に設定されている Dataverse の **実績** エンティティからのすべてのレコードを同期させます。</span><span class="sxs-lookup"><span data-stu-id="2595c-143">The **Project Operations integration actuals** table map synchronizes all the records from the **Actuals** entity in Dataverse, with the attribute **Skip Sync (internal use only)** set to **False**.</span></span> <span data-ttu-id="2595c-144">この属性値は、レコード作成時に自動的に Dataverse に設定されます。</span><span class="sxs-lookup"><span data-stu-id="2595c-144">This attribute value is set in Dataverse automatically when the record is created.</span></span> <span data-ttu-id="2595c-145">この属性が **True** に設定されている例:</span><span class="sxs-lookup"><span data-stu-id="2595c-145">Examples where this attribute is set to **True** are:</span></span>

  - <span data-ttu-id="2595c-146">企業間取引のプロジェクトの原価実績。</span><span class="sxs-lookup"><span data-stu-id="2595c-146">Project cost actuals for intercompany transactions.</span></span> <span data-ttu-id="2595c-147">詳しくは、[企業間取引を作成する](../project-accounting/create-intercompany-transactions.md)をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="2595c-147">For more information, see [Create intercompany transactions](../project-accounting/create-intercompany-transactions.md).</span></span> <span data-ttu-id="2595c-148">システムは企業間のベンダー請求書が転記されたときに、プロジェクトコストの実績を Finance and Operations アプリに再作成するため、これらのレコードはスキップされます。</span><span class="sxs-lookup"><span data-stu-id="2595c-148">These records are skipped because the system recreates the project cost actual in Finance and Operations apps when the intercompany vendor invoice is posted.</span></span>
  - <span data-ttu-id="2595c-149">見積の請求書が確認されたときに作成された負の未請求販売レコードです。</span><span class="sxs-lookup"><span data-stu-id="2595c-149">Negative unbilled sales records created when the proforma invoice is confirmed.</span></span> <span data-ttu-id="2595c-150">Finance and Operations アプリのプロジェクト補助元帳が請求書発行時に未請求の売上レコードを反転させず、状態を完全請求に変更するため、これらのレコードはスキップされます。</span><span class="sxs-lookup"><span data-stu-id="2595c-150">These records are skipped because the project subledger in Finance and Operations apps doesn't reverse the unbilled sales record at invoicing but changes the status to fully invoiced.</span></span>

<span data-ttu-id="2595c-151">二重書き込みのテーブル マッピングは、実績レコードをステージング テーブル (**ProjCDSActualsImport**) に同期します。</span><span class="sxs-lookup"><span data-stu-id="2595c-151">The dual-write table map synchronizes the actuals records to the staging table, **ProjCDSActualsImport**.</span></span> <span data-ttu-id="2595c-152">これらのレコードは、定期的なプロセスである  **ステージング テーブルからのインポート** によって、Project Operations の統合仕訳帳明細行やプロジェクト請求書提案明細を作成する際に処理されます。</span><span class="sxs-lookup"><span data-stu-id="2595c-152">These records are processed by the periodic process **Import from staging table** when creating Project Operations integration journal lines and project invoice proposal lines.</span></span> <span data-ttu-id="2595c-153">詳細については、[Project Operations の統合仕訳帳](../project-accounting/project-operations-integration-journal.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2595c-153">For more information, see [Integration journal in Project Operations](../project-accounting/project-operations-integration-journal.md).</span></span>

<span data-ttu-id="2595c-154">また、Dataverseは **トランザクション接続** のエンティティにおけるプロジェクトの実際の取引との間のリンクを取得します。</span><span class="sxs-lookup"><span data-stu-id="2595c-154">Dataverse also captures the links between the project actual transactions in the **Transaction connection** entity.</span></span> <span data-ttu-id="2595c-155">詳細については、[実績を元のレコードにリンクする](../actuals/linkingactuals.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2595c-155">For more information, see [Link actuals to original records](../actuals/linkingactuals.md).</span></span> <span data-ttu-id="2595c-156">実際のトランザクション間のリンクも、二重書き込みのテーブルマッピング **プロジェクト取引の関係性の統合エンティティ (msdyn\_transactionconnections)** を使用して、Finance and Operations アプリに同期されます。</span><span class="sxs-lookup"><span data-stu-id="2595c-156">Links between actual transactions are also synchronized to Finance and Operations apps using the dual-write table map, **Integration entity for project transaction relationships (msdyn\_transactionconnections)**.</span></span> <span data-ttu-id="2595c-157">これらのレコードは、定期的なプロセスである **ステージング テーブルからのインポート** で使用され、Project Operations 統合仕訳明細行やプロジェクト請求書提案行を作成する際に使用されます。</span><span class="sxs-lookup"><span data-stu-id="2595c-157">These records are used by the periodic process, **Import from staging table** when creating Project Operations integration journal lines and Project invoice proposal lines.</span></span>

<span data-ttu-id="2595c-158">Project Operations 統合仕訳帳とプロジェクト請求書の提案書を転記すると、ステージング テーブル **ProjCDSActualsImport** の各レコードが更新されます。</span><span class="sxs-lookup"><span data-stu-id="2595c-158">Posting a Project Operations integration journal and a project invoice proposal triggers an update in respective records in the staging table, **ProjCDSActualsImport**.</span></span> <span data-ttu-id="2595c-159">システムは、実績取引に対して以下の会計属性を取得して記録します:</span><span class="sxs-lookup"><span data-stu-id="2595c-159">The system captures and records the following accounting attributes for actuals transactions:</span></span>

- <span data-ttu-id="2595c-160">会計通貨の金額</span><span class="sxs-lookup"><span data-stu-id="2595c-160">Accounting currency amount</span></span>
- <span data-ttu-id="2595c-161">為替レート</span><span class="sxs-lookup"><span data-stu-id="2595c-161">Exchange rate</span></span>
- <span data-ttu-id="2595c-162">伝票番号</span><span class="sxs-lookup"><span data-stu-id="2595c-162">Voucher number</span></span>
- <span data-ttu-id="2595c-163">消費税の金額</span><span class="sxs-lookup"><span data-stu-id="2595c-163">Sales tax amount</span></span>

<span data-ttu-id="2595c-164">**Project Operations 統合実績** テーブル マッピングでは、この情報をもとにそれぞれの実績表を Dataverse に更新します。</span><span class="sxs-lookup"><span data-stu-id="2595c-164">The **Project Operations integration actuals** table map updates respective actuals records in Dataverse with this information.</span></span>

---
title: プロジェクトの見積もりと実績の統合
description: このトピックは、プロジェクトの見積もりと実績に向けた Project Operations の二重書き込み統合に関する情報を提供します。
author: sigitac
ms.date: 4/26/2021
ms.topic: article
ms.prod: ''
ms.reviewer: johnmichalak
ms.author: sigitac
ms.openlocfilehash: 5aaa59020427438fa6ebab3789fbb70c5b86e272
ms.sourcegitcommit: c0792bd65d92db25e0e8864879a19c4b93efb10c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/14/2022
ms.locfileid: "8577196"
---
# <a name="project-estimates-and-actuals-integration"></a>プロジェクトの見積もりと実績の統合

_**適用対象:** リソース/非在庫ベースのシナリオ向け Project Operations_

このトピックは、プロジェクトの見積もりと実績に向けた Project Operations の二重書き込み統合に関する情報を提供します。

## <a name="project-estimates"></a>プロジェクト見積もり

プロジェクトの労力、費用、および材料の見積もりは、Microsoft Dataverse で作成および維持され、財務と運用アプリに同期されます。 作成、更新、および削除操作は、財務と運用アプリではサポートされていません。

見積もりを作成するには、プロジェクトの有効な会計の構成が必要です。 契約品目に関連付けられているプロジェクトには、プロジェクトのコストと収益のプロファイル ルールで定義された有効なプロジェクトのコストと収益のプロファイルが必要です。 詳細については、[請求可能なプロジェクトの会計を構成する](../project-accounting/configure-accounting-billable-projects.md#configure-project-cost-and-revenue-profile-rules) を参照してください。

## <a name="labor-estimates"></a>労働力の見積もり

労働力の見積もりは、プロジェクト マネージャーまたはリソース マネージャーが作成します。これらのマネージャーは、一般的なリソースまたは名前付きリソースもプロジェクト タスクに割り当てます。 リソース割り当てレコードは、Dataverse の **リソースの割り当て** のタブにある **プロジェクトの詳細** のページで確認できます。 Dataverse のリソース 割り当てレコードは、**時間見積もり用 Project Operations 統合 (msdyn\_resourceassignments)** 財務と運用アプリで時間見積もりレコードを作成します。

   ![労働力の見積もりの統合。](./Media/DW4LaborEstimates.png)

二重書き込みでは、リソースの割り当てレコードをステージング テーブル (**ProjCDSEstimateHoursImport**) に同期させた後、ビジネス ロジックを使って時間予測レコード (**ProjForecastEmpl**) を作成、更新します。

プロジェクト会計士は、**プロジェクト管理と会計** > **すべてのプロジェクト** > **プラン** > **時間の予測** にアクセスして、財務と運用アプリで作成された予測時間レコードを確認します。

## <a name="expense-estimates"></a>経費の見積もり

経費の見積もりは、プロジェクト マネージャーがDataverse の **プロジェクトの詳細** ページの **経費の見積もり** タブで作成します。 経費の見積もり記録は、Dataverse の **見積もり明細** エンティティに保存されます。 これらの見積もりレコードには、トランザクション クラス、**経費** があり、**経費見積もりのための Project Operations 統合エンティティ (msdyn\_estimatelines)** を使用して財務と運用アプリの経費予測レコードに同期されます。

   ![経費の見積もりの統合。](./Media/DW4ExpenseEstimates.png)

二重書き込みでは、経費の見積もりレコードをステージング テーブル (**ProjCDSEstimateExpenseImport**) に同期させた後、ビジネス ロジックを使って経費予測レコード (**ProjForecastCost**) を作成、更新します。 見積もり明細には、売上の見積もりと原価の見積もりレコードが別々に格納されます。 財務と運用アプリのビジネス ロジックは、ステージング テーブルのこの詳細を使用して、単一の経費予測レコードにデータを入力します。

プロジェクト会計士は、**プロジェクト管理と会計** > **すべてのプロジェクト** > **プラン** > **経費** にアクセスして、財務と運用アプリで作成された経費予測を確認できます。

## <a name="material-estimates"></a>材料の見積もり

材料の見積もりは、プロジェクト マネージャーがDataverse の **プロジェクトの詳細** ページの **材料の見積もり** タブで作成します。 材料の見積もり記録は、Dataverse の **見積もり明細** エンティティに保存されます。 これらの見積もりレコードには、トランザクション クラス、**材料** があり、**材料見積もりのためのプロジェクト統合テーブル (msdyn\_estimatelines)** を使用して財務と運用アプリの項目予測レコードに同期されます。

   ![材料の見積もりの統合。](./Media/DW4MaterialEstimates.png)

二重書き込みでは、材料の見積もりレコードをステージング テーブル (**ProjForecastSalesImpor**) に同期させた後、ビジネス ロジックを使って品目予測レコード (**ForecastSales**) を作成、更新します。 見積もり明細には、売上の見積もりと原価の見積もりレコードが別々に格納されます。 財務と運用アプリのビジネス ロジックは、ステージング テーブルのこの詳細を使用して、単一の項目予測レコードにデータを入力します。

プロジェクト会計士は、**プロジェクト管理と会計** > **すべてのプロジェクト** > **プラン** > **アイテム** にアクセスして、財務と運用アプリで作成されたアイテム予測を確認できます。

## <a name="project-actuals"></a>プロジェクトの実績

プロジェクトの実績は Dataverse で作成されます、これは、時間、費用、材料、請求活動に基づきます。 数量、原価、販売価格、プロジェクトなど、これらの取引のすべてのオペレーション属性がこの Dataverse エンティティに取り込まれます。 詳細については、[実績](../actuals/actuals-overview.md) を参照してください。 実際のレコードは、ダウンストリーム会計用二重書き込みテーブル マップ **Project Operations 統合実績 (msdyn\_actuals)** を使用して財務と運用アプリに同期されます。

   ![実績の統合。](./Media/DW4Actuals.png)

**Project Operations 統合の実績** テーブルマップは、属性 **同期のスキップ (内部使用のみ)** が **False** に設定されている Dataverse の **実績** エンティティからのすべてのレコードを同期させます。 この属性値は、レコード作成時に自動的に Dataverse に設定されます。 この属性が **True** に設定されている例:

  - 企業間取引のプロジェクトの原価実績。 詳しくは、[企業間取引を作成する](../project-accounting/create-intercompany-transactions.md)をご覧ください。 会社間ベンダー請求書が転記されるときに、システムが財務と運用アプリで実際のプロジェクトコストを再作成するため、これらのレコードはスキップされます。
  - 見積の請求書が確認されたときに作成された負の未請求販売レコードです。 財務と運用アプリのプロジェクト補助元帳は、請求時に未請求の販売レコードを元に戻さず、ステータスを完全に請求済みに変更するため、これらのレコードはスキップされます。

二重書き込みのテーブル マッピングは、実績レコードをステージング テーブル (**ProjCDSActualsImport**) に同期します。 これらのレコードは、定期的なプロセスである  **ステージング テーブルからのインポート** によって、Project Operations の統合仕訳帳明細行やプロジェクト請求書提案明細を作成する際に処理されます。 詳細については、[Project Operations の統合仕訳帳](../project-accounting/project-operations-integration-journal.md)を参照してください。

また、Dataverseは **トランザクション接続** のエンティティにおけるプロジェクトの実際の取引との間のリンクを取得します。 詳細については、[実績を元のレコードにリンクする](../actuals/linkingactuals.md)を参照してください。 実際のトランザクション間のリンクも、二重書き込みテーブル マップ、**プロジェクト トランザクションの統合エンティティ リレーションシップ (msdyn\_transactionconnections)** を使用して財務と運用アプリに同期されます。 これらのレコードは、定期的なプロセスである **ステージング テーブルからのインポート** で使用され、Project Operations 統合仕訳明細行やプロジェクト請求書提案行を作成する際に使用されます。

Project Operations 統合仕訳帳とプロジェクト請求書の提案書を転記すると、ステージング テーブル **ProjCDSActualsImport** の各レコードが更新されます。 システムは、実績取引に対して以下の会計属性を取得して記録します:

- 会計通貨の金額
- 為替レート
- 伝票番号
- 消費税の金額

**Project Operations 統合実績** テーブル マッピングでは、この情報をもとにそれぞれの実績表を Dataverse に更新します。

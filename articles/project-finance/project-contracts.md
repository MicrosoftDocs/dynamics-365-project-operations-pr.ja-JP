---
title: プロジェクト契約
description: このトピックでは、さまざまなタイプのプロジェクトおよび資金調達ソースに対して作成できるプロジェクト契約の例と、契約の管理およびプロジェクト顧客への請求方法を示します。
author: KimANelson
manager: AnnBe
ms.date: 11/03/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ProjProjectContractsListPage, ProjProjectsListPage
audience: Application User, IT Pro
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 23561
ms.assetid: bfd18d9b-d9a6-4e21-bc95-bf4af45f617f
ms.search.region: Global
ms.author: knelson
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 854ddfe6db93b7e93a4ee640268a9c8f254f24e7
ms.sourcegitcommit: 8c786230ef2a497280885b827162561776e2eb00
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/24/2020
ms.locfileid: "3752886"
---
# <a name="project-contracts"></a>プロジェクト契約

[!include [banner](../includes/banner.md)]

この記事では、さまざまなタイプのプロジェクトおよび資金調達ソースに対して作成できるプロジェクト契約の例と、契約の管理およびプロジェクト顧客への請求方法を示します。

プロジェクト契約に対して作成するプロジェクトのタイプによって、プロジェクト顧客への請求方法が決まります。 プロジェクト契約と関連プロジェクトは変更できますが、プロジェクト タイプは変更できません。 

プロジェクト契約を使用することにより、一度に 1 つ以上のプロジェクトの請求書を発行できます。 プロジェクト契約は、プロジェクト構造内のすべての下位プロジェクトについて、一貫した請求手順を保証するのにも役立ちます。 

請求されるすべてのプロジェクトは、プロジェクト契約に関連付けられている必要があります。 プロジェクト契約の設定は、そのプロジェクト契約に関連付けられているすべてのプロジェクトと下位プロジェクトに適用されます。 

プロジェクト契約では、1 つ以上の資金調達ソースを指定できます。 したがって、複数の資金提供者の間で請求を分割し、資金調達ソースが指定された金額を超えて請求されないように資金調達の制限を設定し、経費を請求するための資金調達ルールを構成できます。

## <a name="funding-for-project-contracts"></a>プロジェクト契約の資金調達
一部のプロジェクト契約では、複数の関係者がプロジェクトの費用を負担する責任を共有することが指定されます。 次に例をいくつか示します。

-   複数の部署を持つ大規模な顧客が、プロジェクトの資金を部署ごとに分割することを要求する。
-   会社が、大規模プロジェクトのコストを外部組織と共有する。
-   道路のプロジェクトが 2 つの自治体によって共同出資されている。
-   橋梁のプロジェクトが、政府の助成金と民間企業から資金提供を受けている。

Dynamics 365 Finance では、単一のトランザクションまたはプロジェクト全体の請求を複数の顧客、助成金、または組織間で分割できます。 

複数の資金提供者がいるプロジェクトでは、高度な資金調達プロジェクトの資金調達に貢献するすべての関係者を資金調達ソースと呼びます。 顧客、組織、または助成金が資金源として定義された後、1 つかそれ以上の資金調達ルールに割り当てることができます。 資金調達ルールには、プロジェクトのさまざまな資金調達ソースへの諸費用の配賦方法を決定する基準が含まれています。 

購買要求や発注書に表示される在庫品目は分割できないため、配布時にコスト金額を複数の資金調達ソースに分割することはできません。 したがって、在庫払出が転記されるまで、資金調達ソースの値は 0 (ゼロ) のままです。 在庫払出が転記されると、プロジェクトの勘定配賦ルールに従ってコストの金額が配賦されます。

複数の資金調達ソース間で請求を分割しやすくするために実行できるいくつかの手順を次に示します。

-   プロジェクトに入力されるすべてのトランザクションがプロジェクト契約と同じ販売通貨を使用することを指定します。
-   資金調達ソースがプロジェクトに対して指定された金額以上請求されないように、資金調達の制限を設定します。
-   各作業者、品目、カテゴリ、カテゴリ グループ、およびトランザクション タイプ (またはすべてのトランザクション タイプ) ごとに資金調達ルールと資金調達制限を構成します。
-   オプションの開始日と終了日を選択して、各資金調達ルールが有効な期間を定義します。
-   各資金調達ソースが担当する割合を指定します。
-   資金配賦の計算によって生じる丸め差額を担当する資金調達ソースを指定します。
-   プロジェクト コストを外部顧客に請求し、内部組織に請求する方法を決定するルールを設定します。
-   追加の資金が得られるまで、または費用を内部で負担することを決定するまで、保留中の資金口座にトランザクションを記録します。

トランザクションに関連付ける税グループを決定するために、プロジェクトで税グループの割り当てが検索されます。 プロジェクト レベルで税グループの割り当てが行われていない場合は、プロジェクト契約が検索されます。

### <a name="example-multiple-funding-sources-simple"></a>例: 複数の資金調達ソース (単純)

次の表は、複数の資金調達ソース間の資金配賦を管理するためのシナリオを示しています。 これらのシナリオは、次の前提に基づいています。

-   優先度の設定は、他の資金調達ルールの基準が適用される前に資金の配賦に反映されます。
-   資金調達ルールが有効な期間を定義する日付範囲は指定されていません。

<table>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>シナリオ</strong></td>
<td><strong>資金調達ソース</strong></td>
<td><strong>配賦率</strong></td>
<td><strong>配賦の優先順位</strong></td>
</tr>
<tr class="even">
<td>資金がなくなるまでコストを 1 つの資金調達ソースに割り当て、資金がなくなるまでコストを 2 番目の資金調達ソースに割り当て、最後に残りのコストを 3 番目の資金調達ソースに割り当てます。</td>
<td><ul>
<li>資金調達ソース 1</li>
<li>資金調達ソース 2</li>
<li>資金調達ソース 3</li>
</ul></td>
<td><ul>
<li>100%</li>
<li>100%</li>
<li>100%</li>
</ul></td>
<td><ul>
<li>6</li>
<li>2</li>
<li>3</li>
</ul></td>
</tr>
<tr class="odd">
<td>コストの 75% を 1 つの資金調達ソースに割り当て、25% を 2 番目の資金調達ソースに割り当てます。 これらの資金調達ソースのいずれかが使い果たされた場合、残りのコストを 3 番目の資金調達ソースから支払います。</td>
<td><ul>
<li>資金調達ソース 1</li>
<li>資金調達ソース 2</li>
<li>資金調達ソース 3</li>
</ul></td>
<td><ul>
<li>75%</li>
<li>25%</li>
<li>100%</li>
</ul></td>
<td><ul>
<li>6</li>
<li>6</li>
<li>2</li>
</ul></td>
</tr>
<tr class="even">
<td>コストの 75% を 1 つの資金調達ソースに割り当て、25% を 2 番目の資金調達ソースに割り当てます。 これらの資金調達ソースのいずれかが使い果たされた場合、残りのコストを 3 番目と 4 番目の資金調達ソースで分割します。</td>
<td><ul>
<li>資金調達ソース 1</li>
<li>資金調達ソース 2</li>
<li>資金調達ソース 3</li>
<li>資金調達ソース 4</li>
</ul></td>
<td><ul>
<li>75%</li>
<li>25%</li>
<li>50%</li>
<li>50%</li>
</ul></td>
<td><ul>
<li>6</li>
<li>6</li>
<li>2</li>
<li>2</li>
</ul></td>
</tr>
<tr class="odd">
<td>コストの最初の 25% を 1 つの資金調達ソースに割り当て、残りを 2 番目の資金調達ソースに割り当てます。</td>
<td><ul>
<li>資金調達ソース 1</li>
<li>資金調達ソース 2</li>
</ul></td>
<td><ul>
<li>25%</li>
<li>100%</li>
</ul></td>
<td><ul>
<li>6</li>
<li>2</li>
</ul></td>
</tr>
</tbody>
</table>

### <a name="example-multiple-funding-sources-complex"></a>例: 複数の資金調達ソース (複雑)

次の順序で使用する 3 つの資金調達ソースがあります。

1.  資金調達ソース 2 を使い切るまで、資金調達ソース 2 と資金調達ソース 3 を等しく使用します。
2.  資金調達ソース 3 を使い切るまで使い続けます。
3.  資金調達ソース 3 を使い切った後、資金調達ソース 1 を使用します。

この目標を達成するには、次のことを行う必要があります。

-   資金調達ソース 2 と資金調達ソース 3 のそれぞれの金額について、資金調達の制限を設定します。
-   次の資金調達ルールを作成します。
    -   ルール 1 (優先順位 1 ): トランザクションの 50％ を資金調達ソース 2 に割り当て、50％ を資金調達ソース 3 に割り当てます。
    -   ルール 2 (優先順位 2): トランザクションの 100％ を資金調達ソース 3 に割り当てます。
    -   ルール 3 (優先順位 3): トランザクションの 100％ を資金調達ソース 1 に割り当てます。

この設定が機能するのは、トランザクションがルールと制限に照らしてチェックされ、それらがトランザクションに適用されるかどうかが判断されるためです。 トランザクションに特定のルールまたは制限が適用されない場合、すべてのトランザクション ルールが適用されます。 すべてのトランザクション ルールは、すべてのトランザクションと一致します。 

トランザクションに一致するルールが見つかった場合、そのルールに割り当てられている割合が最初に適用されますが、一致が設定されている制限と照合された後にのみ適用されます。 制限が満たされ、資金調達ソースの資金が使い果たされた場合、資金調達制限に関連付けられている資金調達ルールは無視され、プログラムは次に適用されるルールをチェックします。 

場合によっては、トランザクションの一部のみをルールに割り当てることができます。 これは、トランザクションの割り当て時に制限に達したために発生する可能性があります。 この場合、そのルールに従って、各資金調達ソースに 50％ など、特定の量のみが割り当てられます。 これは、このセクションで前述したルール 1 の場合です。 残りは、シーケンスの次のルールに従って割り当てられます。 

次の表では、このシナリオについて詳しく説明します。

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>フォーカス</strong></td>
<td><strong>詳細</strong></td>
</tr>
<tr class="even">
<td>資金調達ルール</td>
<td><ul>
<li>ルール 1 (優先順位 1): すべてのトランザクション。 資金調達ソース 2 を 50%、資金調達ソース 3 を 50% に割り当てます。</li>
<li>ルール 2 (優先順位 2): すべてのトランザクション。 資金調達ソース 3 を 100% に割り当てます。</li>
<li>ルール 3 (優先順位 2): すべてのトランザクション。 資金調達ソース 1 を 100% に割り当てます。</li>
</ul></td>
</tr>
<tr class="odd">
<td>資金調達制限</td>
<td><ul>
<li>資金調達ソース 1 の上限 = 10,000.00</li>
<li>資金調達ソース 2 の上限 = 500.00</li>
<li>資金調達ソース 3 の上限 = 750.00</li>
</ul></td>
</tr>
<tr class="even">
<td>トランザクション 1</td>
<td><strong>トランザクション金額:</strong> 100.00 <strong>資金調達:</strong> トランザクションは、ルール 1 が適用された後に全額支払われるため、ルール 1 に従ってのみ支払われます。 トランザクションは、資金調達ソース 2 と資金調達ソース 3 の間で均等に資金調達されます。
<ul>
<li>資金調達ソース 2: 50.00</li>
<li>資金調達ソース 3: 50.00</li>
</ul></td>
</tr>
<tr class="odd">
<td>トランザクション 2</td>
<td><strong>トランザクション金額:</strong> 5,000.00 <strong>資金調達:</strong> トランザクションは、3 つのルールすべてに従って支払われます。 <strong>ルール 1</strong>
<ul>
<li>資金調達ソース 2: 450.00</li>
<li>資金調達ソース 3: 450.00</li>
</ul>
<strong>ルール 2</strong>
<ul>
<li>資金調達ソース 3: 250.00 (= 750.00 – 50.00 – 450.00)</li>
</ul>
<strong>ルール 3</strong>
<ul>
<li>資金調達ソース 1: 3,850.00 (= 5,000.00 – 450.00 – 450.00 – 250.00)</li>
</ul></td>
</tr>
<tr class="even">
<td>各資金調達ソースに分配される合計資金</td>
<td><ul>
<li>資金調達ソース 1: 3,850.00</li>
<li>資金調達ソース 2: 500.00</li>
<li>資金調達ソース 3: 750.00</li>
</ul></td>
</tr>
</tbody>
</table>

## <a name="billing-rules"></a>請求ルール
顧客とプロジェクト契約を交渉するとき、プロジェクトの作業について顧客に請求する方法と時期を定義します。 プロジェクト契約とプロジェクトを設定した後で、プロジェクトの請求ルールを設定できます。 請求ルールは、プロジェクト契約で指定されているプロジェクト条件に基づいています。 作成できる請求ルールは、プロジェクト契約の条件と、請求ルールに関連付けたプロジェクト タイプ (時間と材料や固定価格など) によって異なります。 プロジェクト契約には、複数の請求ルールを作成できます。 同じプロジェクト契約に関連付けられており、請求条件が類似している複数のプロジェクトに請求ルールを割り当てることもできます。 

次のタイプの請求ルールを設定できます。

-   **出荷単位** – 出荷単位を完了したときに顧客に請求します。 契約で出荷単位を定義します。
-   **進捗** – プロジェクトの指定された割合を完了したときに顧客に請求します。 完了した作業の割合を自動的に計算するように請求ルールを設定するか、完了した作業の割合と顧客に請求する金額を手動で計算できます。
-   **マイルストーン** – マイルストーンに達したら、プロジェクト マイルストーンの全額を顧客に請求します。
-   **費用** – サービスの料金と管理料金 (通常はサービスのコストの割合) を顧客に請求します。
-   **時間と材料** – プロジェクトで使用される時間と材料の値を顧客に請求します。

すべてのタイプの請求ルールについて、プロジェクトが合意済みの段階に達するまで、顧客の請求書から差し引かれる保持率を指定できます。 支払い保持率は、プロジェクト契約で指定されています。 金額は、顧客請求書の明細の合計値に基づいて計算され、そこから差し引かれます。 

**時間と材料**および**進捗**の請求ルールでは、請求可能カテゴリを割り当てることができます。 課金可能カテゴリは、顧客の請求書に含める必要があるトランザクションを示します。 

顧客に請求する準備ができると、プロジェクトの請求金額が請求ルールに基づいて計算され、プロジェクト請求提案が生成されます。 

次のセクションでは、プロジェクトの請求ルールを設定および管理する方法の例を示します。

### <a name="example-create-a-billing-rule-that-is-based-on-the-number-of-units-delivered"></a>例: 出荷された単位数に基づく請求ルールを作成する

組織は、トレーニング セッションごとに 10,000 のコストで顧客の従業員に合計 5 つのトレーニング セッションを提供するという契約を結びます。 各トレーニング セッションの後に顧客に請求します。 

契約の請求ルールを設定するときは、次の値を使用します。

-   出荷単位は 1 つのトレーニング セッションです。
-   単価はトレーニング セッションあたり 10,000 です。
-   単位の総数は 5 つのトレーニング セッションです。

1 回のトレーニング セッションが完了したら、最初に出荷された単位について 10,000 の請求書を作成し、その請求書を顧客に送信できます。

### <a name="example-create-a-billing-rule-that-is-based-on-a-specified-percentage-of-project-completion-manual-calculation"></a>例: 指定されたプロジェクト完了率 (手動計算) に基づく請求ルールを作成する

ソフトウェア コンサルティング会社である組織が、顧客が開発している製品の一部を開発する契約を顧客と締結します。 組織は、ソフトウェア コードを 6 か月間にわたって提供することに同意します。 顧客は、組織に対して合計 100,000 の作業費を支払うことに同意します。 請求ルールを作成して、契約で指定されたプロジェクト完了率に基づいて顧客に請求します。

-   最初の月の終わりに顧客と会い、完了した作業の割合を決定します。 顧客と共にプロジェクトをレビューした後、プロジェクトが 15％ 完了したと判断します。
-   15,000 (100,000 の 15%) の請求書を作成し、それを顧客に送信します。

### <a name="example-create-a-billing-rule-that-is-based-on-a-specified-percentage-of-project-completion-automatic-calculation"></a>例: 指定されたプロジェクト完了率 (自動計算) に基づく請求ルールを作成する

ソフトウェア開発会社である組織が、顧客の給与計算パッケージを 30,000 で開発することに同意します。 顧客は、作業の完了率に基づいて組織に支払を行うことに同意します。 プロジェクト コストは 20,000 であると見積もります。 プロジェクト契約では、請求プロセスで使用する作業のカテゴリを指定します。 各カテゴリの完了した作業の割合に対する請求額を自動的に計算する請求ルールを設定します。 カテゴリごとに予算を設定します。

-   **開発** – 15,000 のコストと 20,000 の売上
-   **インストール** – 5,000 のコストと 10,000 の売上

初めて顧客請求書を作成すると、請求額は次の情報に基づいて自動的に計算されます。

-   1 か月後、プロジェクトの作業者はプロジェクトのタイムシートを提出します。 作業者の時間のコストは、開発で 5,000、インストールで 1,000 です。 開発作業は 33% 完了 (5,000 実績原価 / 15,000 予算原価)、インストール作業は 20% 完了 (1,000 実績原価 / 5,000 予算原価) しています。
-   請求金額 8,667 が自動的に計算されます (20,000 の 33% + 10,000 の 20%)。
-   8,667 の請求書を作成し、それを顧客に送信します。

### <a name="example-create-a-billing-rule-that-is-based-on-agreed-upon-milestones"></a>例: 合意済のマイルストーンに基づく請求ルールを作成する

経営コンサルティング会社である組織は、顧客が販売を計画している消費者製品の市場調査を行うことに同意します。 顧客は、3 月から 3 か月間サービスを使用することに同意し、組織に 50,000 を支払うことに同意します。 プロジェクトには 3 つのマイルストーンがあります。

-   マイルストーン 1: 消費者データの収集 – 3 月 31 日
-   マイルストーン 2: 消費者データの分析 – 4 月 30 日
-   マイルストーン 3: 製品の実行可能性提案を提示する – 5 月 31 日

顧客は、最初のマイルストーンに10,000、2 番目のマイルストーンに 20,000、3 番目のマイルストーンに 20,000 を支払うことに同意します。 

プロジェクト契約を設定すると、完了したマイルストーンに基づいて顧客に請求することに同意したことになります。 請求ルールの設定には、次の手順が含まれます。

-   プロジェクト マイルストーンを定義します。
-   各マイルストーンが完了したときに顧客に請求する金額を定義します。

3 月 31 日に最初のマイルストーンが完了したら、マイルストーンを完了済としてマークし、10,000 の請求書を作成して顧客に送信します。 マイルストーンを完了済としてマークするまで、マイルストーンの請求書を作成することはできません。

### <a name="example-create-a-billing-rule-that-is-based-on-services-plus-a-management-fee"></a>例: サービスと管理料金に基づく請求ルールを作成する

経営コンサルティング会社である組織は、顧客である小売企業が開発している製品の実行可能性を評価するために市場調査を行うことに同意します。 契約の条件では、時間と材料に基づいて調査を実施する上位 3 名の経営コンサルタントのサービスを提供することを指定しています。 顧客は 1 時間あたり 100 に加えて、プロジェクトに請求されるコンサルティング時間に対して 10% の管理料金を支払うことに同意します。 

プロジェクト契約を設定するときに、プロジェクトに請求されるコンサルティング時間に 10％ の管理料金を追加する請求ルールを作成します。 

顧客の請求書を作成すると、顧客には 10％ の管理料金とコンサルティング時間の費用が請求されます。 たとえば、3 人のコンサルタントがプロジェクトで合計 200 時間働いた場合、次の計算に基づいて 22,000 の請求書が作成されます。

-   1 時間あたり 100 で200時間 = 20,000
-   10% の管理料金 = 2,000
-   合計請求金額 = 22,000

料金が顧客に課税される場合に、プロジェクト契約で消費税グループを選択すると、消費税グループは料金の請求ルールに自動的に入力されます。

### <a name="example-create-a-billing-rule-for-the-value-of-time-and-materials"></a>例: 時間と材料の値の請求ルールを作成する

ソフトウェア コンサルティング会社である組織は、次の 6 か月間、顧客向けのソフトウェア開発プロジェクトに取り組むために 5 人の技術コンサルタントを提供することに同意します。 顧客は、コンサルティング時間ごとに 150 と事務用品の費用を支払うことに同意します。 組織は毎月末に顧客に請求書を送ります。 

プロジェクト契約を設定すると、プロジェクトの時間と材料について毎月顧客に請求することに同意したことになります。 次の情報を含む請求ルールを作成します。

-   契約期間は 6 ヶ月です。
-   コンサルティング時間は、1 時間あたり 150 の割合で計算されます。
-   事務用品は原価で請求され、プロジェクトの総コストは 10,000 を超えてはなりません。
-   プロジェクト中の各カレンダー月の末に顧客請求書を作成します。

最初の 1 か月の間に、プロジェクトのコンサルタントが合計 800 時間を記録しました。 プロジェクトに請求される事務用品のコストは 2,000 です。 したがって、月末に 122,000 の請求書を作成します。これは、1 時間あたり 150 で 800 時間、事務用品には 2,000 を加えたものとして計算されます。




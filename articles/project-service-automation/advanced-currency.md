---
title: 複数通貨のシナリオ (バージョン 3.x)
description: このトピックでは、複数通貨のシナリオに関する情報を説明します。
author: rumant
manager: kfend
ms.service: dynamics-365-customerservice
ms.custom:
- dyn365-projectservice
ms.date: 12/26/2018
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.assetid: 4b589142-952d-4121-ab5c-3aa7a85690e2
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
ms.openlocfilehash: d9dbd7755e2dc4bd33f264feb7d8bf9f2a4a0787
ms.sourcegitcommit: 8c786230ef2a497280885b827162561776e2eb00
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/24/2020
ms.locfileid: "3752818"
---
# <a name="multiple-currency-scenarios"></a>複数通貨のシナリオ

[!INCLUDE[cc-applies-to-psa-app-3.x](../includes/cc-applies-to-psa-app-3x.md)]

Microsoft Dynamics 365 には通貨の概念が 2 つあります。

- **取引通貨** - トランザクションが発生する通貨。 
- **基本通貨** - Dynamics 365 インスタンスの通貨。 この通貨は Dynamics 365 インスタンスのプロビジョニング時に設定されます。 これは変更できません。

たとえば、Contoso US 社は英国の顧客に 100 着の T シャツをそれぞれ 15 ポンド (GBP) で販売しました。 次の表は、このトランザクションが受注製品エンティティにどのように記録されるかを示しています。

| 製品 | 数量 | 出荷単位ごとの価格 | [通貨] | [金額] | 為替レート | 出荷単位当たりの価格 (基本)| 金額 (基本)|
|---------|----------|----------------|----------|--------|---------------|----------------------|--------------|
| T シャツ | 100      | 15             | GBP      | 1500   | 0.94          | $17.25               | $1,725       |

**通貨** 列には取引通貨が表示されます。これは販売が行われた通貨です。 **為替レート** 列は取引通貨と基本通貨間の為替レートです。 基本通貨は米ドル (USD) です。 この基本通貨は Dynamics 365 インスタンスがプロビジョニングされたときに設定されたものです。
表が示すように、すべてのトランザクションは取引通貨と基本通貨の両方で記録されます。 Dynamics 365 は為替レートを使用して基本通貨額を計算します。

## <a name="project-service-automation-extensions"></a>Project Service Automation の拡張機能

通常、ビジネス トランザクションにはコストと販売の 2 つの側面があるため、Dynamics 365 Project Service Automation は取引通貨に影響します。

次のエンティティはビジネス トランザクションと見なされます。

- 見積依頼明細行の詳細
- プロジェクト契約品目の詳細
- 見積行
- 仕訳帳明細行
- 請求明細行の詳細
- 実績

これらの各エンティティには、コスト額や販売額を表すレコードがあります。 **金額** フィールドを持つ Dynamics 365 エンティティに関しては、各レコードに取引通貨と基本通貨の両方の金額が含まれます。 

PSA は以下の方法でコストと販売の取引通貨の概念を拡張します。

- 時間取引のコスト取引通貨は、常にプロジェクトを所有または管理する組織単位の通貨に由来します。 この組織単位を契約単位と呼びます。
- 時間と経費のトランザクションの販売取引通貨は、常にプロジェクト契約の通貨に基づきます。
- 経費の費用取引通貨は、経費エントリが作成された通貨から取得されます。

## <a name="multiple-currency-scenario"></a>複数通貨のシナリオ

このセクションでは、Contoso UK が日本の Fabrikam という名前の顧客に提供するプロジェクトの例を説明します。 シナリオの設定方法を以下に示します。

1. GBP と日本円 (JPY) を **設定** \> **業務管理** \> **通貨** から設定します。 
2. **Fabrikam - 日本** という名前の顧客アカウントが設定され、日本円がアカウントの通貨として選択されます。
3. **Contoso UK** という名前の組織単位が設定され、通貨として GBP が選択されます。
4. プロジェクト契約が作成されます。**Contoso UK** は契約単位として指定され、**Fabrikam – 日本** が顧客として指定されます。
5. プロジェクト契約品目は、時間の請求と費用の請求など、プロジェクトのさまざまなトランザクション クラスの請求契約に基づいて作成されます。
6. **Contoso UK** が契約単位として指定されたプロジェクトが作成されます。 このプロジェクトを作成してプロジェクト契約品目にマップします。


見積もり明細行の詳細、プロジェクト契約品目の詳細、スケジュールの見積もりラインを使用する見積りで、2 つのレコードが常にエンティティに作成されます。 1 つのレコードはコスト用で、もう 1 つは販売用です。

- 既定では、コスト レコードの取引通貨がプロジェクトの契約単位の通貨に設定されます。 この例で通貨は GBP です。
- 既定では、販売レコードの取引通貨がプロジェクト契約の通貨に設定されます。 この例で通貨は JPY です。

時間エントリや仕訳帳明細行を使用して実績が時間に対して作成されると次の動作が発生します。

- 既定では、コスト レコードの取引通貨がプロジェクトの契約単位の通貨に設定されます。
- 既定では、販売レコードの取引通貨がプロジェクト契約の通貨に設定されます。

経費エントリや仕訳帳明細行で経費の実績が作成されると、次の動作が発生します。

- 任意の通貨で経費の額を記録できます。 **経費エントリ** ページまたは **仕訳帳明細行** ページで通貨ピッカーを使用して通貨を選択します。 既定では経費レコードの取引通貨が、経費入力の通貨に設定されます。 
- 既定では、販売レコードの取引通貨がプロジェクト契約の通貨になります。 この通貨を設定するために、システムはまずユーザーが入力した通貨の取引金額を基本通貨に変換します。 次に、金額をプロジェクト契約の通貨に変換します。 

### <a name="computing-roll-ups-when-project-actuals-are-recorded-in-multiple-transaction-currencies"></a>プロジェクト実績が複数の取引通貨で記録されている場合、ロールアップを計算します。

Dynamics 365 は異なる通貨での金額のロールアップを自動的に処理します。 例を次に示します。

| トランザクション クラス | トランザクションの種類| Date   | リソース | トランザクション カテゴリ | 数量 | 単価 | [金額]      | 為替レート | 金額の基本 |
|-------------------|------------------|--------|----------|----------------------|----------|--------------|-------------|---------------|----------------|
| Time              | 未請求売上   | 6 月 14 日 | 直樹  |                      | 8 時間    | 20,000 JPY    | 160,000 JPY | 123           | 1,300.81 USD    |
| Time              | 未請求売上   | 6 月 15 日 | 直樹  |                      | 8 時間    | 20,000 JPY    | 160,000 JPY | 123           | 1,300.81 USD    |
| 経費           | 未請求売上   | 6 月 16 日 | 直樹  | 宿泊                | 1 ea     | 250 EUR      | 250 EUR     | 0.94          | 265.95 USD     |
| 経費           | 未請求売上   | 6 月 17 日 | 直樹  | レンタカー           | 1 ea     | 150 EUR      | 150 EUR     | 0.94          | 159.57 USD     |

プロジェクトの合計未請求販売額を計算するために、関連するすべての未請求販売実績の **金額** フィールドのロールアップ フィールドを作成できます。 ロールアップ フィールドは Dynamics 365 の構造であり、関連レコードの迅速な定式化を可能にします。

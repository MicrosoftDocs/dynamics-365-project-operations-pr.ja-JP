---
title: プロジェクト ステータスを同期して、クローズされたプロジェクトへのエントリを防止する
description: この記事では、プロジェクト ステータスを同期して、非アクティブまたはクローズされたプロジェクトへのエントリを防止する方法について説明します。
author: ryansandnessMSFT
ms.date: 08/09/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: ryansandnessMSFT
ms.openlocfilehash: 7a306da164235f36d9ed5e69196508dce6d257de
ms.sourcegitcommit: 6b6c2bfd04e3e613ed1f38355c7cd47c3a56748d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/24/2022
ms.locfileid: "9348016"
---
# <a name="sync-project-status-to-prevent-entry-against-closed-projects"></a>プロジェクト ステータスを同期して、クローズされたプロジェクトへのエントリを防止する

_**適用対象:** リソース/非在庫ベースのシナリオ向け Project Operations_

## <a name="scenario"></a>シナリオ

Contoso は、リソース/非在庫シナリオ向けに Microsoft Dynamics 365 Project Operations を使用しています。 通常のビジネス活動の一環として、プロジェクトが完了または保留されることがあります。 プロジェクトを非アクティブ化して、経費や請求書が生成されないようにすることができます。

## <a name="solution"></a>Solution

### <a name="prerequisites"></a>前提条件

-   Microsoft Dynamics 365 Finance 10.0.29 以降がインストールされている必要があります。
-   プロジェクト V2 (msdyn\_projects) 用の二重書き込みマップ 1.0.0.3 をインストールするか、以下で説明するように手動で構成する必要があります。

### <a name="create-an-updated-version-of-the-project-operations-integration-projects-v2-dual-write-map"></a>Project Operations 統合 プロジェクト V2 二重書き込みマップの更新バージョンを作成する

Project Operations プロジェクト V2 二重書き込みマップの更新には:

1. **データ管理** ワークスペースに移動し、**二重書き込み** を選択します。
2. **二重書き込み** タイルを選択します。
3. T **テーブル マップ** 列から、**プロジェクト V2 (msdyn\_projects)** を見つけて選択し、停止を選択します。
4. マップ名を選択してマップを開き、**[なし]** を選択します。
5. 列の選択ダイアログ ボックスで、**状態コード \[プロジェクト ステータス\]** を選択し、OK を選択します。 フィルタ―値に **状態** と入力して、リストを絞り込むことができます。
6.  **マップ タイプ** 列で **変換の追加または編集** を選択して、変換を編集します。
7.  **変換の種類** フィールドから、**ValueMap** を選択します。
8.  **値のマッピングを追加** を選択し、次に以下の **キー** と **値** を追加します:

   Key       | 価値 
   ----------|-------
   InProcess | 12     
   completed | 6     

![二重書き込みマッピングを示すスクリーンショット](media/projectstage-dw-mapping.png)

9. **保存** を選択します。
10. **二重書き込み > プロジェクト V2 (msdyn_projects)** ページの上部から、**名前を付けて保存** を選択します。
11. **公開元** フィールドの **テーブルを追加** から、**CDS 規定公開元** を選択します。
12. **バージョン** フィールドを 1.0.0.3 に設定します。
13. **説明** を入力し、**保存** を選択します。
14. **二重書き込み > プロジェクト V2 (msdyn_projects)** ページの上部から、**実行** を選択してマップを開始し、実行前に確認を求められた場合は、**はい** を選択します。 

### <a name="close-a-newly-completed-project"></a>新たに完成したプロジェクトを閉じる

Dynamics 365 Finance は、**プロジェクト ステージ** フィールドを使用して **処理中** または **完了した** プロジェクトを区別します。 **完了した** プロジェクトでは、費用の発生や、顧客への請求をすることはできません。

1. 非アクティブ化するプロジェクトを開きます。
2. リボンから **非アクティブ化する** を選択します。

> [!NOTE]
> Finance のコンテキストではどちらも同じように動作するため、プロジェクトを非アクティブ化することも、閉じることもできます。

3. Finance で、**すべてのプロジェクト一覧** ページを開きます。
4. 非アクティブ化されたプロジェクトがリストに表示されないことを確認します。
5. リストの上の **プロジェクトを表示** フィルターで、値を **アクティブ** から **すべて** に変更します。
6. 非アクティブ化されたプロジェクトが表示されます。

Finance でこのプロジェクトに対して時間または経費を記録しようとすると、選択するプロジェクトが表示されません。 経費のプロジェクト番号を手動で入力すると、「プロジェクト ステージが終了したため、プロジェクトに記録できません」といったメッセージが表示されます。 請求およびその他の請求機能は、クローズしたプロジェクトのコンテキストになるため、無効にする必要があります。


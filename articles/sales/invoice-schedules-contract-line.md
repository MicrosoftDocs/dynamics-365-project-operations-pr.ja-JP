---
title: プロジェクトベースの契約品目で請求スケジュールを作成する
description: このトピックでは、契約品目で請求スケジュールとマイルストーンを作成する方法について説明します。
author: rumant
manager: Annbe
ms.date: 10/17/2020
ms.topic: article
ms.service: dynamics-365-customerservice
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 23378b51c8324a60918ad494e7f659dbbc94e2a8
ms.sourcegitcommit: 3a0c18823a7ad23df5aa3de272779313abe56c82
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/20/2020
ms.locfileid: "4079500"
---
# <a name="create-an-invoice-schedule-on-a-project-based-contract-line"></a>プロジェクトベースの契約品目で請求スケジュールを作成する 

_**適用対象:** リソース/非在庫ベースのシナリオ向け Project Operations_

プロジェクトベースの契約品目に請求スケジュールを作成できます。 請求は、契約が成立し、プロジェクト契約を作成した後にのみ許可されます。 請求スケジュールを使用すると、プロジェクトベースの契約品目の下書き請求書を自動的に作成できます。 ただし、手動で請求書を作成するだけの場合は、契約品目での請求書スケジュールの作成をスキップできます。

## <a name="create-a-time-and-material-invoice-schedule-for-a-contract-line"></a>契約品目の時間と材料の請求スケジュールを作成する

プロジェクトベースの契約品目に時間と材料の請求方法がある場合、日付ベースの請求スケジュールを作成できます。 日付ベースの請求スケジュールを自動的に生成するには、次の手順を実行します。

1. **設定** > **請求頻度** に移動し、請求頻度を設定します。
2. プロジェクト契約レコードに移動し、**概要** タブの **配送指定日** フィールドで、日付を選択します。
3. 日付ベースの請求スケジュールを作成する **時間と材料** の契約品目を開きます。 
4. **請求スケジュール** タブで、請求開始日と請求頻度を選択します。
5. サブグリッドで **請求スケジュールの生成** を選択します。 請求スケジュールは、**請求書の実行日**、**トランザクション締め日**、**実行の状態** フィールドが次のように設定された状態で生成されます:

    - **請求書の実行日**: この日付は、請求頻度によって決まります。
    - **トランザクション締め日**: 請求書の実行日の前日。
    - **実行の状態**: 自動的に **未実行** に設定されます。 請求書自動作成ジョブが特定の請求書の実行日に実行されると、このフィールドは **実行成功** または **実行失敗** に更新されます。

## <a name="create-a-fixed-price-invoice-schedule-for-a-contract-line"></a>契約品目の固定価格の請求スケジュールを作成する

契約品目に固定請求方法がある場合、マイルストーンベースの請求スケジュールを作成できます。 

> [!NOTE]
> 契約品目にマップされたプロジェクトがない場合、マイルストーンを契約品目に作成することはできません。

次の手順を実行して、カレンダー期間に均等に配分され、固定されたマイルストーンのセットに対してマイルストーンベースの請求スケジュールを生成します。

1. **設定** > **請求頻度** に移動し、請求頻度を設定します。
2. プロジェクト契約レコードに移動し、**概要** タブの **配送指定日** フィールドで、日付を選択します。
3. マイルストーン スケジュールを作成する **固定価格** の契約品目を開きます。 **請求マイルストーン** タブで、請求開始日と請求頻度を選択します。 
4. サブグリッドで、**定期マイルストーンの生成** を選択します。 請求スケジュールは、**マイルストーンの名前**、**マイルストーンの日付**、**マイルストーンの金額** フィールドが次のように設定された状態で生成されます:

    - **マイルストーンの名前**: この日付は、請求頻度によって決まります。
    - **マイルストーンの日付**: この日付は、請求頻度によって決まります。
    - **マイルストーンの金額**: この金額は、契約品目の契約金額を、頻度、請求開始日、および配送指定日によって指定されたマイルストーンの数で割って計算されます。

    契約品目の **推定税額** フィールドに値がある場合、このフィールドは、定期的なマイルストーンを生成するとき、各マイルストーンにも均等に配分されます。

請求マイルストーンは、契約品目の契約金額と等しくなければなりません。 そうでない場合は、**契約品目** ページにエラーが表示されます。 マイルストーンを作成、編集、または削除して、請求マイルストーンが明細行の契約金額を合計していることを確認することで、エラーを修正できます。 変更を加えたら、ページを更新してエラーを削除します。

### <a name="manually-create-milestones"></a>マイルストーンを手動で作成する

定期的に分割されていない場合は、固定価格マイルストーンを手動で生成できます。 マイルストーンを手動で作成するには、以下の手順に従います。

1. マイルストーンを作成する固定価格の契約品目を開き、**請求スケジュール** タブのサブグリッドで、**+ 新しい契約品目マイルストーンを作成** を選択します。 
2. **マイルストーンの作成** ページで、次の表に基づいて必要な情報を入力します。

| フィールド | 場所 | 関連性、目的、およびガイダンス | 下位への影響 |
| --- | --- | --- | --- |
| マイルストーンの名前 | 簡易作成 | マイルストーンの名前のテキスト フィールド。 | これは、プロジェクト契約品目のマイルストーンと請求書に引き継がれます。 |
| プロジェクト タスク | 簡易作成 | マイルストーンがプロジェクト タスクに関連付けられている場合は、この参照を使用してカスタム ロジックを追加し、タスクの状態に基づいてマイルストーンの状態を設定します。 | アプリケーションでは、タスクへのこの参照の下位への影響はありません。 |
| マイルストーンの日付 | 簡易作成 | 自動請求書作成プロセスがこのマイルストーンの状態を検索して、請求の対象と見なす日付を設定します。 | これは、プロジェクト契約品目のマイルストーンと請求書に引き継がれます。 |
| 請求書の状態 | 簡易作成 | マイルストーンが作成されると、この状態は常に **請求準備未完了** または **開始前** に設定されます。 | これは、プロジェクト契約品目のマイルストーンと請求書に引き継がれます。 |
| 明細行の金額 | 簡易作成 | 顧客に請求されるマイルストーンの金額または値。 | これは、プロジェクト契約品目のマイルストーンと請求書に引き継がれます。 |
| 税額 | 簡易作成 | マイルストーンに適用される税額。 | これは、プロジェクト契約品目のマイルストーンと請求書に引き継がれます。 |

3. **保存して閉じる** を選択します。

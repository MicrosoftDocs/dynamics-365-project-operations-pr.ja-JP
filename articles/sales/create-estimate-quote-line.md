---
title: 見積依頼明細行の見積もりの作成
description: このトピックでは、プロジェクトで使用する見積もり明細に概算を作成する方法について説明します。
author: rumant
manager: AnnBe
ms.date: 09/18/2020
ms.topic: article
ms.prod: ''
ms.service: project-operations
audience: Application User
ms.reviewer: kfend
ms.search.scope: ''
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Service industries
ms.author: rumant
ms.dyn365.ops.version: ''
ms.search.validFrom: 2020-10-01
ms.openlocfilehash: 97030689eddb88576ffcf9dd848f8a0776512192
ms.sourcegitcommit: 4cf1dc1561b92fca4175f0b3813133c5e63ce8e6
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/28/2020
ms.locfileid: "4122934"
---
# <a name="create-estimates-on-a-quote-line"></a>見積依頼明細行の見積もりの作成

_**適用対象 :** リソース/非在庫ベースのシナリオに使用するプロジェクト オペレーション、見積請求に対応する小規模のデプロイ_

プロジェクトベースの見積りでは、見積明細詳細エンティティを使用して、プロジェクトの提供に必要な作業を見積もることができます。 顧客とその見積もりを共有することができます。

プロジェクトベースの見積明細には、見積明細詳細は必要ありません。 または、見積明細の詳細を多数含めることもできます。 見積明細詳細は、時間、費用または手数料の見積に使用されます。 Dynamics 365 プロジェクト オペレーションでは、見積明細詳細での原料の見積には対応していません。 これらはトランザクション クラスと呼ばれます。 見積税額はトランザクション クラスにも入力できます。

トランザクション クラスに加えて、見積明細詳細にもトランザクション タイプがあります。 見積明細詳細は、2つのトランザクション タイプに対応しています、 **コスト** および **プロジェクト契約** です。

## <a name="estimate-by-using-a-contract"></a>契約を使用した見積もり

プロジェクトベースの契約を作成する際に、プロジェクト オペレーションの見積もりを使用した場合は、見積もりの各見積明細に対して行った見積がプロジェクト契約にコピーされます。 プロジェクト契約の構造は、明細、明細詳細および請求書予定があるプロジェクト見積もりの構造と共通しています。

見積もりは、プロジェクト見積もりの場合と同様に、プロジェクト契約で直接実行することができます。 プロジェクト見積もりの場合、見積もりは契約明細と契約明細詳細を使用して行われます。 契約明細の詳細は、ボトムアップ見積もりアプローチを使用して作成されたプロジェクト計画からも生成することができます。

契約明細の詳細を使用して、時間、費用または手数料を見積ることができます。 見積もり税額は、契約明細詳細にも入力できます。

契約明細の詳細では原料見積には対応していません。

プロジェクト契約で対応している処理は、請求書の作成と確認です。 請求書作成では、現在日までのすべての未請求販売実績を含むプロジェクト基準請求書のドラフトが作成されます。

確認することにより、契約が読取り専用になり、ステータスが **下書き** から **確認済** に変更されます。 この操作を行った後は、元に戻すことはできません。 この操作はやり直すことが出来ないため、契約を **下書き** ステータスのままにしておくことを推奨します。

下書き契約と確定契約の唯一の違いはそのステータスです。下書き契約は編集することができますが確定契約は編集することができません。 請求書の作成と実績の追跡は、下書き契約と確認済契約の両方で実行することができます。

契約またはプロジェクトの受注変更には対応していません。

## <a name="estimating-projects"></a>見積もりプロジェクト

プロジェクトの時間と費用を見積もることができますが、材料や料金は見積もることができません。

時間の見積もりが生成されるタイミングは、タスクを作成し、タスクの実行に必要な標準リソースの属性を識別するときです。 時間の見積もりはスケジュール タスクから生成されます。 スケジュールのコンテキスト外で汎用的なチームメンバーを作成した場合、時間の見積もりは作成されません。

経費の予測が **見積もり** ページのグリッドに入力されます。

## <a name="understand-estimation"></a>見積もりについて

以下の表を参考にして、見積り段階のビジネス ロジックを理解してください。

| シナリオ                                                                                                                                                                                                                                                                                                                                          | エンティティ レコード                                                                                                                                                                                                       | トランザクションの種類 | トランザクション クラス | 追加情報                                                            |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------|-------------|-----------------------------------------------------------------------------------|
| 見積り時間の売上価値を見積もる必要がある場合                                                                                                                                                                                                                                                                                    | 見積明細詳細(QLD) が作成されます                                                                                                                                                                               | プロジェクト契約 | Time        | 売上側のQLD行にある 「取引発生元」 フィールドは、原価側のQLDを参照します。 |
|                                                                                                                                                                                                                                                                                     | システムによって2番目のQLDレコードが作成され、ここには対応する原価値が格納されます。 すべての金銭が関連しないフィールドは、システムによって売上QLDから原価QLDにコピーされます。                                                                                                                                                                               | コスト | Time        | 売上側の見積明細詳細 (QLD) 行の取引元フィールドは、原価側のQLDを参照します。 |
| 契約時間の売上価値を見積もる必要がある場合                                                                                                                                                                                                                                                                                 | プロジェクト契約明細詳細 (CLD) レコードが作成されます                                                                                                                                                                    | プロジェクト契約 | Time        | 売上側のQLD行にある 「取引発生元」 フィールドは、原価側のQLDを参照します。      |
|                                                                                                                                                                                                                                                                                  | システムによって2番目のQLDレコードが作成され、ここには対応する原価値が格納されます。 すべての金銭が関連しないフィールドは、システムによって売上QLDから原価QLDにコピーされます。                                                                                                                                                                    | コスト | Time        | 売上側のQLD行にある 「取引発生元」 フィールドは、原価側のQLDを参照します。      |
| ユーザーがプロジェクトタスクのリソースを説明する場合                                                                                                                                                                                                                                                                                            | すべての必須となっている価格設定ディメンションでタスクを作成すると、タスクの売上値を示す予測ラインのレコードが作成されます。 役割と組織単位は、価格設定ディメンションです | プロジェクト契約 | 時間        |                                                                                   |
|     | すべての必須となっている価格設定ディメンションでタスクを作成すると、タスクの原価値を示す予測ラインのレコードが作成されます。 すべての金銭が関連しないフィールドは、システムによって売上予測ラインから原価予測ラインにコピーされます。 役割と組織単位は、価格設定ディメンションであり、原価レートと請求レートの両方に対応しています。                                                                                                                                                                                                                | 原価             | 時間           |                                                                                   |



## <a name="customize-the-quote-line-detail-and-contract-line-detail-entities"></a>見積品目詳細エンティティと契約品目詳細エンティティをカスタマイズする

見積明細詳細にカスタム フィールドを追加し、作成される関連する原価明細にフィールドの値を既定値として自動入力する場合は、PreOperationContractLineDetailUpdate および PreOperationQuoteLineDetailUpdate プラグイン登録ツールを使用します。 これらのプラグインは、見積明細詳細または契約明細詳細の変更後に再登録する必要があります。 このプロセスを完了するには、以下の手順に従ってください。

1. PluginRegistrationTool を開いて、オンライン インスタンスに接続します。
2. **検索** を選択し、更新するプラグインを検索します。
3. プラグインを選択し、メイン ページで **選択する** を選択します。
4. 更新をするプラグインのステップを選んで右クリックし、 **更新** を選択します。
5. **既存の手順の更新** ダイアログ ボックスで、 **属性をフィルタする** フィールドの省略記号(...)ボタン (**...**) を選択します:
6. **属性の選択** ダイアログ ボックスで、カスタム属性のチェックボックスを選択します。
7. **OK** を選択してダイアログボックスを閉じ、 **手順の更新** を選択します。
8. さらにプラグインを更新するには、手順1 から 7を繰り返します。
9. プラグイン登録ツールを閉じます。


[!INCLUDE[footer-include](../includes/footer-banner.md)]
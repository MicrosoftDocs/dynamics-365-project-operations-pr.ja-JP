---
title: プロジェクトの見積もり請求
description: このトピックは、Project Operations における見積もりプロジェクト請求書に関する情報を提供します。
author: rumant
ms.date: 04/06/2021
ms.topic: article
ms.prod: ''
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 1b839c3e40ddcfe1f07b0330a78c42851140d4bf
ms.sourcegitcommit: 40f68387f594180af64a5e5c748b6efa188bd300
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/10/2021
ms.locfileid: "6004042"
---
# <a name="proforma-project-pnvoices"></a>プロジェクトの見積もり請求

_**適用対象:** ライト展開 - 見積もり請求の取引_

プロジェクト見積もり請求は、プロジェクト管理者が顧客に対する請求書を作成する前に、第 2 レベルの承認を提供します。 プロジェクト チーム メンバーが送信する時間、経費、および材料のエントリが承認されると、第 1 レベルの承認が完了します。

Dynamics 365 Project Operations Lite Deploymentは、顧客向けの請求書を生成するようには設計されていません。 次のリストは、請求書を生成できない理由を示しています。

- 税務情報は含まれていません。
- 他の通貨を請求通貨に変換することはできません。
- 請求書を印刷用に正しくフォーマットできません。

代わりに、財務または会計システムを使用して、生成された仮発行請求書で使用する情報を使用して顧客向け請求を作成できます。

## <a name="creating-project-invoices"></a>プロジェクトの請求書を作成する

プロジェクトの請求書は 1 つずつ、または一括して作成できます。 手動で作成できます。また、自動実行で生成するように設定することもできます。

### <a name="manually-create-project-invoices"></a>プロジェクトの請求書を手動で作成する 

**プロジェクト契約** 一覧ページで、プロジェクト契約ごとに個別にプロジェクト請求書を作成することも、複数のプロジェクト契約に対して一括で請求書を作成することもできます。

   - 特定のプロジェクト契約に対して請求書を作成するには、**プロジェクト契約** 一覧ページで、プロジェクト契約を 1 つ以上選択し、**請求書の​​作成** を選択します。

   ステータスが **請求準備完了** の選択したプロジェクト契約の全トランザクションに対して請求書が生成されます。 これらのトランザクションには、時間、費用、材料、マイルストーン、製品ベースの契約品目、および確認された可能性のあるその他の未請求の販売仕訳行が含まれます。

請求書を一括作成するには:

1. **プロジェクト契約** 一覧ページで、請求書を作成するプロジェクト契約を 1 つ以上選択し、 **プロジェクト請求書の作成** を選択します。
2. 請求書が作成されるまでに遅延が生じる場合があることを伝える警告メッセージが表示されます。 プロセスも表示されます。 **OK** を選択してメッセージ ボックスを閉じます。

   ステータスが **請求準備完了** の契約品目の全トランザクションに対して請求書が生成されます。 これらのトランザクションには、時間、費用、材料、マイルストーン、製品ベースの契約品目、および確認された可能性のあるその他の未請求の販売仕訳行が含まれます。

3. **営業** \> **請求先** \> **請求書** の順に移動して、生成された請求書を表示します。 プロジェクト契約ごとに 1 つの請求書が表示されます。

### <a name="set-up-automated-creation-of-project-invoices"></a>プロジェクト請求書の自動作成を設定する 

請求書の自動化を実行するには、次の手順に従います。

1. **設定** \> **バッチ ジョブ** に移動します。
2. バッチ ジョブを作成し、 **プロジェクト オペレーション請求書の作成** と名前をつけます。 バッチ ジョブの名前に、「請求書の作成」という語句を含める必要があります。
3. **ジョブの種類** フィールドで、 **なし** を選択します。 既定で、 **頻度 毎日** および **アクティブ** オプションは **はい** に設定されています。
4. **ワークフローの実行** を選択します。 **レコードの検索** ダイアログ ボックスに、次のワークフローが表示されます。

    - ProcessRunCaller
    - ProcessRunner
    - UpdateRoleUtilization

5. **ProcessRunCaller** を選択して、**追加** を選択します。
6. 次のダイアログ ボックスで、**OK** を選択します。 **スリープ** ワークフローの後に **プロセス** ワークフローになります。

    ステップ 5 で **ProcessRunner** を選択することもできます。 **OK** を選択すると、 **プロセス** ワークフロー の後には、 **スリープ** ワークフローが続きます。

**ProcessRunCaller** および **ProcessRunner** ワークフローは、請求書を作成します。 **ProcessRunCaller** は **ProcessRunner** を呼び出します。 **ProcessRunner** は、請求書を作成するワークフローです。 このワークフローは、請求書を作成する必要のあるすべての契約品目を調べ、それらの明細の請求書を作成します。 契約書を作成する契約品目を決定するために、ワークフローは契約品目の請求書の実行日を参照します。 1 つの契約に属する契約品目の請求書実行日が同じ場合、トランザクションは、 2 つの請求明細行を持つ 1 つの請求書に統合されます。 請求書を作成するトランザクションがない場合、請求書は作成されません。

**ProcessRunner** の実行が完了すると、 **ProcessRunCaller** を呼び出して、終了時間が指定されてクローズされます。 次に、指定された終了時刻から 24 時間実行されるタイマーが **ProcessRunCaller** によって開始されます。 タイマーの終了時間になると、**ProcessRunCaller** は終了します。

請求書を作成するバッチ処理ジョブは反復ジョブです。 このバッチ処理を何度も実行すると、ジョブの複数のインスタンスが作成され、エラーが発生する可能性があります。 この問題を回避するには、バッチ処理を一度だけ実行し、実行が停止した場合のみ、再起動します。

> [!NOTE]
> バッチ請求は、請求スケジュールで構成されたプロジェクト契約明細に対してのみ実行されます。 固定価格の請求方法の契約品目には、マイルストーンを構成する必要があります。 時間と材料の請求方法を持つプロジェクト契約品目には、日付ベースの請求スケジュールを設定する必要があります。 これは、プロジェクトベースの契約品目でも同じです。      
 
### <a name="edit-a-draft-invoice"></a>請求書の下書きを編集する

プロジェクト請求書のドラフトを作成すると、時間と経費のエントリが承認したときに作成された、すべての未請求営業トランザクションが、請求書にプルされます。 請求書がまだドラフト段階である間は、次の調整を行うことができます:

- 請求明細行の詳細を削除、または編集します。
- 数量や請求書の種類を編集、調整します。
- 請求書にトランザクションとして直接、時間、経費、材料、そして手数料を追加します。 請求明細行が、これらの取引区分を許可する契約品目にマップされている場合、この機能が使用できます。

請求書を確認するには、 **確認** を選択します。 このアクションは、一方向のアクションです。 **確認** を選択すると、請求書が読み取り専用になり、各請求明細行の各請求明細行の詳細から請求済みの売上実績を作成します。 請求明細行の詳細が未請求売上実績を参照する場合、未請求売上実績も取り消されます。 時間、費用、または材料用途エントリから作成された請求書明細の詳細は、未請求の売上実績を参照します。 総勘定元帳統合システムは、この取消を使用して、会計目的で進行中のプロジェクト仕掛品 (WIP) を取り消すことができます。

### <a name="correct-a-confirmed-invoice"></a>確認済みの請求書を修正する

確認済みの請求書は編集可能です。 確認済みの請求書を修正すると、新規修正請求書ドラフトが作成されます。 元の請求書のすべてのトランザクションと数量を取り消すことを前提としているため、この修正請求書には元の請求書のすべてのトランザクションが含まれ、その数量はすべて 0 になります。

修正を必要とないトランザクションがある場合、その修正請求書のドラフトから削除できます。 部分的な数量を取り消す、または戻り場合は、明細行の詳細の **数量** フィールドを編集できます。 請求明細行の詳細を開くと、元の請求書の数量が表示されます。 その後、現在の請求書の数量を編集して、元の請求書の数量よりも少なく、または多くすることができます。

修正請求書を確認すると、元の請求済み売上実績が取り消され、新規の請求済み売上実績が作成されます。 数量が削減された場合、差異により未請求売上実績が作成されます。 例えば、元の請求済み売上が 8 時間分であり、修正された請求明細行の詳細の数量が 6 時間に減少した場合、元の請求売上明細行を戻し、新たに 2 つの実績が作成されます :

- 6 時間の請求済み売上実績。
- 残り 2 時間の未請求売上実績。 このトランザクションは、顧客との交渉に応じて後で請求するか、または請求不可としてマークすることができます。



[!INCLUDE[footer-include](../../includes/footer-banner.md)]

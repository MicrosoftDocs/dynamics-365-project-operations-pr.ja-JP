---
title: 価格設定エンティティとトランザクション エンティティにユーザー定義フィールドを追加する
description: このトピックでは、価格設定エンティティとトランザクション エンティティに対してカスタム フィールドを追加する方法について説明します。
author: Rumant
manager: kfend
ms.custom:
- dyn365-projectservice
ms.date: 10/01/2020
ms.topic: article
ms.service: business-applications
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365PS
- ProjectOperations
ms.openlocfilehash: af2256e77c3ceeee9638f57d971137df1658687b
ms.sourcegitcommit: 418fa1fe9d605b8faccc2d5dee1b04b4e753f194
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/10/2021
ms.locfileid: "5148469"
---
# <a name="add-custom-fields-to-price-setup-and-transactional-entities"></a><span data-ttu-id="afe31-103">価格設定エンティティとトランザクション エンティティにユーザー定義フィールドを追加する</span><span class="sxs-lookup"><span data-stu-id="afe31-103">Add custom fields to price setup and transactional entities</span></span> 

[!include [banner](../includes/psa-now-project-operations.md)]

<span data-ttu-id="afe31-104">このトピックの内容は、 [ユーザー定義のフィールドとエンティティを作成する](create-custom-fields-entities.md) のトピックに記載された内容を完了していることが前提となっています。</span><span class="sxs-lookup"><span data-stu-id="afe31-104">This topic assumes that you have completed the procedures in the topic, [Create custom fields and entities](create-custom-fields-entities.md).</span></span> <span data-ttu-id="afe31-105">次に、これらの手順を完了していない場合は、戻ってこれらを完了してから、このトピックに戻ってください。</span><span class="sxs-lookup"><span data-stu-id="afe31-105">If you haven't completed those procedures, go back and complete them and then return to this topic.</span></span> 

<span data-ttu-id="afe31-106">このトピックでは、必要なユーザー定義フィールド参照をエンティティーおよびフォームやビューなどのユーザー インターフェース(UI) の要素に追加する手順を説明します。</span><span class="sxs-lookup"><span data-stu-id="afe31-106">In this topic, the procedures will show you how to add the required custom field references to entities and to the user interface (UI) elements such as forms and views.</span></span>

## <a name="add-custom-pricing-dimension-fields"></a><span data-ttu-id="afe31-107">価格設定ディメンション ユーザー定義フィールドを追加する</span><span class="sxs-lookup"><span data-stu-id="afe31-107">Add custom pricing dimension fields</span></span> 
<span data-ttu-id="afe31-108">ユーザー定義フィールドとエンティティを作成したら、次の手順では、参照フィールドを作成して、価格設定エンティティと取引エンティティにユーザー定義エンティティまたはオプションセットを認識させます。</span><span class="sxs-lookup"><span data-stu-id="afe31-108">After custom fields and entities have been created, the next step is to make price setup and transactional entities aware of any custom entities or option sets by creating reference fields.</span></span> <span data-ttu-id="afe31-109">価格設定ディメンション リストにオプション セット ディメンションまたはエンティティ ディメンション、あるいはその両方が含まれているかどうかを判断の上で、 **オプション セット ベースの ユーザー定義の価格設定ディメンション** または **エンティティ ベースの ユーザー定義の価格設定ディメンション** の手順、あるいはその両方の手順に従ってください。</span><span class="sxs-lookup"><span data-stu-id="afe31-109">Depending on whether your pricing dimensions list includes option set dimensions or entity dimensions or both, follow only the steps in **Option set-based custom pricing dimensions** or **Entity-based custom pricing dimensions**, or both, respectively.</span></span>

### <a name="option-set-based-custom-pricing-dimensions"></a><span data-ttu-id="afe31-110">オプション セット ベースのユーザー定義の価格設定ディメンション</span><span class="sxs-lookup"><span data-stu-id="afe31-110">Option set-based custom pricing dimensions</span></span>
<span data-ttu-id="afe31-111">ユーザー定義の価格設定ディメンションがオプション セット ベースの場合は、キーとなる Project Service エンティティにフィールドとして追加します。</span><span class="sxs-lookup"><span data-stu-id="afe31-111">When a custom pricing dimension is option set-based, add it as a field to key Project Service entities.</span></span> <span data-ttu-id="afe31-112">以下の手順では、オプション セット ベースの価格設定ディメンションとして **リソースの作業場所** および **リソースの作業時間** が使用されます。</span><span class="sxs-lookup"><span data-stu-id="afe31-112">In the following procedure, **Resource Work Location** and **Resource Work Hours** are used as the option set-based pricing dimensions.</span></span> <span data-ttu-id="afe31-113">**ロールの価格** と **ロール価格の利幅** これらは、まずフィールドとして価格設定エンティティに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="afe31-113">These must first be added as fields to the pricing entities, **Role Price** and **Role Price Markup**.</span></span>

1. <span data-ttu-id="afe31-114">Project Service Automation (PSA) で、**設定** > **ソリューション** をクリックし、**\<your organization name> 価格設定ディメンション** をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="afe31-114">In Project Service Automation (PSA), click **Settings** > **Solutions**, and then double-click **\<your organization name> pricing dimensions**.</span></span> 
2. <span data-ttu-id="afe31-115">ソリューション エクスプローラーの左側のナビゲーションパネルで、 **エンティティ > ロールの価格** を選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-115">In Solution Explorer, on the left navigation pane, select **Entities > Role Price**.</span></span>
3. <span data-ttu-id="afe31-116">**役割価格** エンティティを展開して **フィールド** を選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-116">Expand the entity **Role Price** and select **Fields**.</span></span>
4. <span data-ttu-id="afe31-117">**新規** をクリックして **リソースの作業場所** という新しいフィールドを作成し、フィールドタイプとして **オプション セット** を選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-117">Click **New** to create a new field called **Resource Work Location** and select **Option set** as the field type.</span></span> 
5. <span data-ttu-id="afe31-118">**既存のオプション セットを使用する** を選択し、 **リソースの作業場所** オプション セットを選択し、 **保存** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="afe31-118">Select **Use an existing Option set**, select the **Resource Work Location** option set, and then click **Save**.</span></span>
6. <span data-ttu-id="afe31-119">手順1 - 5を繰り返し、 **ロール価格の利幅** エンティティにこのフィールドを追加します。</span><span class="sxs-lookup"><span data-stu-id="afe31-119">Repeat steps 1 - 5 to add this field to the **Role Price Markup** entity.</span></span> 
7. <span data-ttu-id="afe31-120">手順1 - 5を繰り返し、 **リソースの作業時間** オプション セットを追加します。</span><span class="sxs-lookup"><span data-stu-id="afe31-120">Repeat steps 1 - 5 for the **Resource Work Hours** option set.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="afe31-121">複数のエンティティにフィールドを追加する際には、すべてのエンティティで共通のフィールド名を使用してください。</span><span class="sxs-lookup"><span data-stu-id="afe31-121">When you add a field to more than one entity, use the same field name across all of the entities.</span></span> 

> ![リソースの作業場所をロール価格に追加する](media/RWL-Field.png)

<span data-ttu-id="afe31-123">プロジェクトの販売フェーズと見積フェーズでは、作業量の見積もりが必要となります。これを完了するには、 **標準時間** と **残業時間**  の枠組みの中で **ローカル** 作業と **オンサイト** 作業を使用して、見積/プロジェクトの値を予測します。</span><span class="sxs-lookup"><span data-stu-id="afe31-123">In the sales and estimation phases for a project, estimates of the work effort that is required to complete **Local** and **Onsite** work, in **Regular hours** and **Overtime hours**  are used to estimate the value of the Quote/Project.</span></span> <span data-ttu-id="afe31-124">**リソースの作業場所** と **リソースの作業時間** フィールドが、見積エンティティ、**見積依頼明細行の詳細**、**契約品目明細**、**プロジェクト タスク**、**プロジェクト・チーム・メンバー**、**見積行** に追加されます。</span><span class="sxs-lookup"><span data-stu-id="afe31-124">The fields **Resource Work Location** and **Resource Work Hours** will be added to the estimation entities, **Quote Line Detail**, **Contract Line detail**, **Project Task**, **Project Team Member**, and **Estimate Line**.</span></span>

1. <span data-ttu-id="afe31-125">PSA で、**設定** > **ソリューション** をクリックし、続いて **\<your organization name> 価格ディメンション** をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="afe31-125">In PSA, click **Settings** > **Solutions**, and then double-click **\<your organization name> pricing dimensions**.</span></span> 
2. <span data-ttu-id="afe31-126">ソリューション エクスプローラーの左側のナビゲーションパネルで、 **エンティティ > 見積品目明細** を選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-126">In Solution Explorer, on the left navigation pane, select **Entities > Quote Line Detail**.</span></span>
3. <span data-ttu-id="afe31-127">**見積品目明細** エンティティを展開し、 **フィールド** 選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-127">Expand the **Quote Line Detail** entity, and select **Fields**.</span></span>
4. <span data-ttu-id="afe31-128">**新規** をクリックして **リソースの作業場所** という新しいフィールドを作成し、フィールドタイプには **オプション セット** を選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-128">Click **New** to create a new field called **Resource Work Location** and select the field type, **Option set**.</span></span> 
5. <span data-ttu-id="afe31-129">**既存のオプション セットを使用する** と **リソースの作業場所** オプション セットを選択し、 **保存** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="afe31-129">Select **Use an existing Option set** and **Resource Work Location**, and then click **Save**.</span></span>
6. <span data-ttu-id="afe31-130">手順1 - 5 を繰り返し、**プロジェクト契約品目の詳細**、**プロジェクト タスク**、**プロジェクト チーム メンバー**、**見積行** エンティティにこのフィールドを追加します。</span><span class="sxs-lookup"><span data-stu-id="afe31-130">Repeat steps 1 - 5 to add this field to the **Project Contract line detail**,**Project Task**, **Project Team Member**, and **Estimate Line** entities.</span></span>
7. <span data-ttu-id="afe31-131">手順1 - 6を繰り返し、 **リソースの作業時間** オプション セットを追加します。</span><span class="sxs-lookup"><span data-stu-id="afe31-131">Repeat steps 1 - 6 for the **Resource Work Hours** option set.</span></span> 

> ![リソースの作業場所を見積もり明細に追加する](media/RWL-Default-Value.png)


<span data-ttu-id="afe31-133">出荷および請求には、完了した作業が正確に価格設定される必要があります。そのためには作業が **ローカル** または **オンサイト** のどちらで行われたか、および プロジェクト実績の **通常時間** または **超過時間** のどちらで完了したかを選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-133">For delivery and invoicing, completed work needs to be accurately priced to select whether it was performed **Local** or **Onsite**, and whether it was completed during **Regular hours** or **Overtime** on the Project Actuals.</span></span> <span data-ttu-id="afe31-134">**リソースの作業場所** と **リソースの作業時間** フィールドを、 **時間エントリ**、 **実績**、 **請求品目の明細**、 **仕訳帳明細行** エンティティに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="afe31-134">The **Resource Work Location** and **Resource Work hours** fields should be added to the **Time Entry**, **Actual**, **Invoice Line Detail**, and **Journal Line** entities.</span></span>

1. <span data-ttu-id="afe31-135">PSA で、**設定** > **ソリューション** をクリックし、続いて **\<your organization name> 価格ディメンション** をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="afe31-135">In PSA, click **Settings** > **Solutions**, and then double-click **\<your organization name> pricing dimensions**.</span></span>
2. <span data-ttu-id="afe31-136">ソリューション エクスプローラーの左側のナビゲーションパネルで、 **エンティティ > 時間エントリ** を選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-136">In Solution Explorer, on the left navigation pane, select  **Entities > Time Entry**.</span></span>
3. <span data-ttu-id="afe31-137">**見積品目明細** エンティティを展開し、 **フィールド** 選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-137">Expand the **Quote Line Detail** entity, and then select **Fields**.</span></span>
4. <span data-ttu-id="afe31-138">**新規** をクリックして **リソースの作業場所** という新しいフィールドを作成し、フィールドタイプとして **オプション セット** を選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-138">Click **New** to create a new field called **Resource Work Location** and select **Option set** as the field type.</span></span> 
5. <span data-ttu-id="afe31-139">**既存のオプション セットを使用する** を選択し、 **リソースの作業場所** オプション セットを選択し、 **保存** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="afe31-139">Select **Use an existing Option set**, select the **Resource Work Location** option set, and then click **Save**.</span></span>
6. <span data-ttu-id="afe31-140">手順1 - 5を繰り返し、 **実績**、 **請求品目の明細**、 **仕訳帳明細行** エンティティにこのフィールドを追加します。</span><span class="sxs-lookup"><span data-stu-id="afe31-140">Repeat steps 1 - 5 to add this field to the **Actual**, **Invoice Line Detail**, and **Journal Line** entities.</span></span>
7. <span data-ttu-id="afe31-141">手順1 - 6を繰り返し、 **リソースの作業時間** オプション セットを追加します。</span><span class="sxs-lookup"><span data-stu-id="afe31-141">Repeat steps 1 - 6 for the **Resource Work Hours** option set.</span></span> 

> ![リソースの作業場所を時間エントリに追加する](media/RWL-time-entry.png)

<span data-ttu-id="afe31-143">これにより、オプション セット ベースのカスタム ディメンションに必要なスキーマの変更が完了します。</span><span class="sxs-lookup"><span data-stu-id="afe31-143">This completes the schema changes required for option set-based custom dimensions.</span></span>

## <a name="entity-based-custom-pricing-dimensions"></a><span data-ttu-id="afe31-144">エンティティ ベースのユーザー定義の価格設定ディメンション</span><span class="sxs-lookup"><span data-stu-id="afe31-144">Entity-based custom pricing dimensions</span></span>

<span data-ttu-id="afe31-145">ユーザー定義の価格設定ディメンションがエンティティの場合は、ディメンション エンティティと主要な Project Service エンティティの間に1:Nの関係性を追加します。</span><span class="sxs-lookup"><span data-stu-id="afe31-145">When the custom pricing dimension is an entity, you will add 1:N relationships between the dimension entity and key Project Service entities.</span></span> <span data-ttu-id="afe31-146">前述の スタンダード タイトル の例では、各従業員にスタンダード タイトルが割り当てられることが期待できます。</span><span class="sxs-lookup"><span data-stu-id="afe31-146">Using the Standard Title example from above, it is reasonable to expect that each employee is assigned a standard title.</span></span> <span data-ttu-id="afe31-147">その結果、スタンダード タイトル から 予約可能なリソース への1:Nの関係、または 予約可能なリソース からスタンダード タイトルへのN:1関係が必要になります。</span><span class="sxs-lookup"><span data-stu-id="afe31-147">SAs a result, you will need a 1:N relationship from Standard Title to Bookable Resource, or a N:1 relationship if it were created from Bookable Resource to Standard Title.</span></span>

1. <span data-ttu-id="afe31-148">PSA で、**設定** > **ソリューション** をクリックし、続いて **\<your organization name> 価格ディメンション** をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="afe31-148">In PSA, click **Settings** > **Solutions**, and then double-click **\<your organization name> pricing dimensions**.</span></span> 
2. <span data-ttu-id="afe31-149">ソリューション エクスプローラーの左側のナビゲーションパネルで、 **エンティティ > スタンダード タイトル** を選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-149">In Solution Explorer, on the left navigation pane, select **Entities > Standard Title**.</span></span>
3. <span data-ttu-id="afe31-150">**スタンダード タイトル** エンティティを展開し、 **1: Nの関連付け** を選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-150">Expand the **Standard Title** entity and select **1:N Relationships**.</span></span>
4. <span data-ttu-id="afe31-151">**新規** をクリックし、 **予約可能なリソースに対するスタンダード タイトル** として新たな1:Nの関係性を作成します。</span><span class="sxs-lookup"><span data-stu-id="afe31-151">Click **New** to create a new 1:N relationship called **Standard Title to Bookable Resource**.</span></span> <span data-ttu-id="afe31-152">その他の必要情報を入力し、 **保存** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="afe31-152">Enter the required information, and then click **Save**.</span></span>

> ![スタンダード タイトルを参照フィールドとして予約可能なリソースに追加する](media/ST-BR.png)

<span data-ttu-id="afe31-154">スタンダード タイトルは、Project Service 価格設定エンティティの **ロールの価格** 、 **ロール価格の利幅** に追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="afe31-154">The Standard Title will also need to be added to Project Service Pricing entities, **Role Price** and **Role Price Markup**.</span></span> <span data-ttu-id="afe31-155">これは、 **スタンダード タイトル** エンティティと **ロールの価格** エンティティ、および **スタンダード タイトル** エンティティと **ロール価格の利幅** エンティティ間の1:Nの関係を使用しても完了します。</span><span class="sxs-lookup"><span data-stu-id="afe31-155">This is also completed using 1:N relationships between the **Standard Title** and **Role Price** entities and **Standard Title** and **Role Price Markup** entities.</span></span>

1. <span data-ttu-id="afe31-156">ソリューション エクスプローラーの左側のナビゲーションパネルで、 **エンティティ > スタンダード タイトル** を選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-156">In Solution Explorer, on the left navigation pane, select **Entities > Standard Title**.</span></span>
2. <span data-ttu-id="afe31-157">**スタンダード タイトル** エンティティを展開し、 **1: Nの関連付け** を選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-157">Expand the **Standard Title** entity and select **1:N Relationships**.</span></span>
3. <span data-ttu-id="afe31-158">**新規** をクリックし、 **ロールの価格に対するスタンダード タイトル** として新たな1:Nの関係性を作成します。</span><span class="sxs-lookup"><span data-stu-id="afe31-158">Click **New** to create a new 1:N relationship called **Standard Title to Role Price**.</span></span> <span data-ttu-id="afe31-159">その他の必要情報を入力し、 **保存** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="afe31-159">Enter the required information, and then click **Save**.</span></span>
4. <span data-ttu-id="afe31-160">手順1 - 4を繰り返し、 **スタンダード タイトル** エンティティ と **ロール価格の利幅** エンティティ間に1:Nの関連付けを作成します。</span><span class="sxs-lookup"><span data-stu-id="afe31-160">Repeat steps 1 - 4 to create 1:N relationships between the **Standard Title** and **Role Price Markup** entities,</span></span>

<span data-ttu-id="afe31-161">プロジェクトの販売および見積フェーズでは、見積/プロジェクトの価格を設定するために、スタンダード タイトルごとに作業量の見積が必要となります。</span><span class="sxs-lookup"><span data-stu-id="afe31-161">In the sales and estimation phases for the project, to price the Quote/Project, estimates of the work effort are required for each standard title.</span></span> <span data-ttu-id="afe31-162">これは、スタンダード タイトルから Project Service 内のこれらの見積エンティティのそれぞれに1:Nの関係が必要であることを意味します:</span><span class="sxs-lookup"><span data-stu-id="afe31-162">This means that 1:N relationships from Standard Title to each of these estimation entities in Project Service are needed:</span></span> 

- <span data-ttu-id="afe31-163">**見積品目明細**</span><span class="sxs-lookup"><span data-stu-id="afe31-163">**Quote line Detail**</span></span>
- <span data-ttu-id="afe31-164">**プロジェクト契約品目の詳細**</span><span class="sxs-lookup"><span data-stu-id="afe31-164">**Project Contract Line Detail**</span></span>
- <span data-ttu-id="afe31-165">**プロジェクト タスク**</span><span class="sxs-lookup"><span data-stu-id="afe31-165">**Project Task**</span></span>
- <span data-ttu-id="afe31-166">**プロジェクト チーム メンバー**</span><span class="sxs-lookup"><span data-stu-id="afe31-166">**Project Team Member**</span></span>
- <span data-ttu-id="afe31-167">**見積行**</span><span class="sxs-lookup"><span data-stu-id="afe31-167">**Estimate Line**</span></span>

5. <span data-ttu-id="afe31-168">手順 1 - 5 を繰り返し、**スタンダード タイトル** から **見積品目明細**、**プロジェクト契約品目の詳細**、**プロジェクト タスク**、**プロジェクト チーム メンバー**、**見積行** に対して 1:N の関連付けを作成します。</span><span class="sxs-lookup"><span data-stu-id="afe31-168">Repeat steps 1 - 5 to create 1:N relationships from **Standard Title** to **Quote line Detail**, **Project Contract Line Detail**, **Project Task**, **Project Team Member**, and **Estimate Line**.</span></span>

> ![スタンダード タイトルを参照フィールドとして見積もり明細に追加する](media/ST-Estimate-Line.png)

<span data-ttu-id="afe31-170">出荷フェーズと請求フェーズでは、各スタンダード タイトルによって完了された作業が、プロジェクト実績に正確な価格設定がされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="afe31-170">In the Delivery and Invoicing phases, the work completed by each standard title must be accurately priced on the Project Actuals.</span></span> <span data-ttu-id="afe31-171">つまり、 **スタンダード タイトル** と **時間エントリ**、 **実績**、 **請求書品目明細**、 **仕訳帳明細行** の間に1:N の関連付けが設定されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="afe31-171">This means that there needs to be 1:N relationships from **Standard Title** to **Time Entry**, **Actual**, **Invoice Line Detail**, and **Journal Line entities**.</span></span>

6. <span data-ttu-id="afe31-172">手順1 - 6 を繰り返し、 **スタンダード タイトル** と **時間エントリ**、 **実績**、 **請求書品目明細**、 **仕訳帳明細行** の間に1:N の関連付けを設定します。</span><span class="sxs-lookup"><span data-stu-id="afe31-172">Repeat steps 1 - 6 to create 1:N relationships from **Standard Title** to **Time Entry**, **Actual**, **Invoice Line Detail**, and **Journal Line entities**.</span></span>

> ![スタンダード タイトルを参照フィールドとして時間エントリに追加する](media/ST-Mapping.png)

### <a name="set-up-dimension-value-defaulting-using-the-mappings-features-of-the-platform"></a><span data-ttu-id="afe31-174">プラットフォームのマッピング機能を使用した既定のディメンション値の設定</span><span class="sxs-lookup"><span data-stu-id="afe31-174">Set up Dimension value defaulting using the mappings features of the platform</span></span>
<span data-ttu-id="afe31-175">時間エントリでは、時間入力を記録している 予約可能リソースの時間エントリ のスタンダード タイトルをシステムで既定の設定とすると便利です。</span><span class="sxs-lookup"><span data-stu-id="afe31-175">For Time Entry, it would be helpful to have the system default the standard title on the Time Entry from the Bookable Resource that is recording the time entry.</span></span> <span data-ttu-id="afe31-176">以下の手順に従って、 **予約可能なリソース** から **時間エントリ** の間に設定された 1:N の関連付けにフィールド マッピングを追加します。</span><span class="sxs-lookup"><span data-stu-id="afe31-176">Use the following steps to add field mappings on the 1:N relationship from **Bookable Resource** to **Time Entry**.</span></span>

1. <span data-ttu-id="afe31-177">ソリューション エクスプローラーの左側のナビゲーションパネルで、 **エンティティ > スタンダード タイトル** を選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-177">In Solution Explorer, on the left navigation pane, select **Entities > Standard Title**.</span></span>
2. <span data-ttu-id="afe31-178">**スタンダード タイトル** エンティティを展開し、 **1: Nの関連付け** を選択します。</span><span class="sxs-lookup"><span data-stu-id="afe31-178">Expand the **Standard Title** entity and select **1:N Relationships**.</span></span>
3. <span data-ttu-id="afe31-179">**時間エントリに対する予約可能なリソース** をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="afe31-179">Double-click **Bookable Resource to Time Entry**.</span></span> <span data-ttu-id="afe31-180">**関連付け** ページで、 **フィールド マッピングを使用する** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="afe31-180">On the **Relationship** page, click **Use Field mappings**.</span></span> 
4. <span data-ttu-id="afe31-181">**新規** をクリックして、 **予約可能なリソース** エンティティの **スタンダード タイトル** フィールドと **スタンダード タイトル** エンティティの **時間エントリ** 参照フィールドの間の新しいフィールドマッピングを作成します。</span><span class="sxs-lookup"><span data-stu-id="afe31-181">Click **New** to create a new field mapping between the **Standard Title** field on the **Bookable Resource** entity to the **Standard Title** reference field on **Time Entry** entity.</span></span> 

> ![スタンダード タイトル を 予約可能なリソース から 時間エントリ にデフォルト設定するためのフィールド マッピングを設定する](media/ST-Mapping2.png)


<span data-ttu-id="afe31-183">これにより、エンティティベースのカスタムディメンションに必要なスキーマの変更が完了します。</span><span class="sxs-lookup"><span data-stu-id="afe31-183">This completes the schema changes required for entity-based custom dimensions.</span></span>

##  <a name="add-custom-fields-to-forms-views-and-business-rules"></a><span data-ttu-id="afe31-184">ユーザー定義フィールドをフォーム、ビュー、ビジネスルールに追加する</span><span class="sxs-lookup"><span data-stu-id="afe31-184">Add custom fields to forms, views, and business rules</span></span>

<span data-ttu-id="afe31-185">必要なスキーマの変更をすべて行ったら、フォームとビューにフィールドを追加してUI上にフィールドが表示されるよう設定します。</span><span class="sxs-lookup"><span data-stu-id="afe31-185">After you have made all of the required schema changes, the next step is to make the fields visible in the UI by adding the fields to the forms and views.</span></span>

1. <span data-ttu-id="afe31-186">フォームまたはビューを開きます。</span><span class="sxs-lookup"><span data-stu-id="afe31-186">Open the form or the view.</span></span> <span data-ttu-id="afe31-187">右のナビゲーション ウィンドウで、フィールドを選択し、フォームキャンバスにドラッグします。</span><span class="sxs-lookup"><span data-stu-id="afe31-187">On the right navigation pane, select the field and drag it on to the form canvas.</span></span> 
2. <span data-ttu-id="afe31-188">ビューを編集する場合は、右側のナビゲーション ウィンドウを使用し、 **フィールドの追加**、 **フィールドのリスト** ダイアログ ボックスで必要なフィールドを選択して、 **Ok** をクリックします</span><span class="sxs-lookup"><span data-stu-id="afe31-188">If you are editing a view, use the right navigation pane, click **Add fields**, and in the **Field listing** dialog box, select the fields that you need and click **Ok**.</span></span>

<span data-ttu-id="afe31-189">以下に、初期状態のフォームとビューのエンティティ別の包括的なリストを示します。これらは新しいフィールドを使用して更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="afe31-189">The following table provides a comprehensive list of out-of-the-box forms and views, by entity, that will need to be updated with the new fields.</span></span> <span data-ttu-id="afe31-190">これらエンティティのカスタマイズに追加のビューまたはフォームがある場合は、それらに対しても新しいフィールドを追加します。</span><span class="sxs-lookup"><span data-stu-id="afe31-190">If you have any additional views or forms in your customizations on these entities, add the new fields to those as well.</span></span>

| <span data-ttu-id="afe31-191">Project Service エンティティ</span><span class="sxs-lookup"><span data-stu-id="afe31-191">Project Service Entity</span></span>        | <span data-ttu-id="afe31-192">新しいフィールドが必要なフォーム</span><span class="sxs-lookup"><span data-stu-id="afe31-192">Forms that need the new field</span></span>   |<span data-ttu-id="afe31-193">新しいフィールドが必要なビュー</span><span class="sxs-lookup"><span data-stu-id="afe31-193">Views that need the new field</span></span>      |
| ------------------------------|---------------------------------|----------------------------------|
|  <span data-ttu-id="afe31-194">ロール価格</span><span class="sxs-lookup"><span data-stu-id="afe31-194">Role Price</span></span>|<span data-ttu-id="afe31-195">• 情報</span><span class="sxs-lookup"><span data-stu-id="afe31-195">• Information</span></span> |<span data-ttu-id="afe31-196">• アクティブなリソース カテゴリ価格</span><span class="sxs-lookup"><span data-stu-id="afe31-196">• Active Resource Category Prices</span></span><br> <span data-ttu-id="afe31-197">• リソース カテゴリ価格関連ビュー</span><span class="sxs-lookup"><span data-stu-id="afe31-197">• Resource Category Price Associated View</span></span>|
|  <span data-ttu-id="afe31-198">ロール価格利幅</span><span class="sxs-lookup"><span data-stu-id="afe31-198">Role Price Markup</span></span>|<span data-ttu-id="afe31-199">• 情報</span><span class="sxs-lookup"><span data-stu-id="afe31-199">• Information</span></span>|<span data-ttu-id="afe31-200">• アクティブなロール価格利幅</span><span class="sxs-lookup"><span data-stu-id="afe31-200">• Active Role Price Markup</span></span><br><span data-ttu-id="afe31-201">• ロール価格利幅の関連ビュー</span><span class="sxs-lookup"><span data-stu-id="afe31-201">• Role Price Markup Associated View</span></span>|
|  <span data-ttu-id="afe31-202">見積依頼明細行の詳細</span><span class="sxs-lookup"><span data-stu-id="afe31-202">Quote line detail</span></span>|<span data-ttu-id="afe31-203">• プロジェクト情報</span><span class="sxs-lookup"><span data-stu-id="afe31-203">• Project Information</span></span><br><span data-ttu-id="afe31-204">• プロジェクトの簡易作成</span><span class="sxs-lookup"><span data-stu-id="afe31-204">• Project Quick Create</span></span>|<span data-ttu-id="afe31-205">• アクティブな見積依頼明細行の詳細</span><span class="sxs-lookup"><span data-stu-id="afe31-205">• Active Quote Line Detail</span></span><br><span data-ttu-id="afe31-206">• 結合済みの見積依頼明細行の詳細</span><span class="sxs-lookup"><span data-stu-id="afe31-206">• Combined Quote Line Details</span></span><br><span data-ttu-id="afe31-207">• 見積依頼明細行の詳細関連ビュー</span><span class="sxs-lookup"><span data-stu-id="afe31-207">• Quote Line Detail associated view</span></span>|
|  <span data-ttu-id="afe31-208">プロジェクト契約品目の詳細</span><span class="sxs-lookup"><span data-stu-id="afe31-208">Project Contract line detail</span></span>|<span data-ttu-id="afe31-209">• プロジェクト情報</span><span class="sxs-lookup"><span data-stu-id="afe31-209">• Project Information</span></span><br><span data-ttu-id="afe31-210">• プロジェクトの簡易作成</span><span class="sxs-lookup"><span data-stu-id="afe31-210">• Project Quick Create</span></span>|<span data-ttu-id="afe31-211">• 結合済みの契約品目の詳細</span><span class="sxs-lookup"><span data-stu-id="afe31-211">• Combined Contract Line Details</span></span><br><span data-ttu-id="afe31-212">• アクティブな契約品目の詳細</span><span class="sxs-lookup"><span data-stu-id="afe31-212">• Active Contract Line Details</span></span><br><span data-ttu-id="afe31-213">• 契約品目の詳細と関連するビュー</span><span class="sxs-lookup"><span data-stu-id="afe31-213">• Contract Line Details Associated View</span></span>|
|  <span data-ttu-id="afe31-214">プロジェクト タスク</span><span class="sxs-lookup"><span data-stu-id="afe31-214">Project Task</span></span>|<span data-ttu-id="afe31-215">• 情報</span><span class="sxs-lookup"><span data-stu-id="afe31-215">• Information</span></span><br><span data-ttu-id="afe31-216">• 新規フォーム</span><span class="sxs-lookup"><span data-stu-id="afe31-216">• New Form</span></span>||
|  <span data-ttu-id="afe31-217">プロジェクト チーム メンバー</span><span class="sxs-lookup"><span data-stu-id="afe31-217">Project Team Member</span></span>|<span data-ttu-id="afe31-218">• 情報</span><span class="sxs-lookup"><span data-stu-id="afe31-218">• Information</span></span><br><span data-ttu-id="afe31-219">• 新規フォーム</span><span class="sxs-lookup"><span data-stu-id="afe31-219">• New Form</span></span>|<span data-ttu-id="afe31-220">• アクティブなプロジェクト チーム メンバー</span><span class="sxs-lookup"><span data-stu-id="afe31-220">• Active Project Team Members</span></span><br><span data-ttu-id="afe31-221">• プロジェクト チーム メンバー</span><span class="sxs-lookup"><span data-stu-id="afe31-221">• Project Team Members</span></span><br><span data-ttu-id="afe31-222">• プロジェクト チーム メンバー関連ビュー</span><span class="sxs-lookup"><span data-stu-id="afe31-222">• Project Team members associated View</span></span>|
|  <span data-ttu-id="afe31-223">時間入力</span><span class="sxs-lookup"><span data-stu-id="afe31-223">Time Entry</span></span>|<span data-ttu-id="afe31-224">• 情報</span><span class="sxs-lookup"><span data-stu-id="afe31-224">• Information</span></span><br><span data-ttu-id="afe31-225">• 時間エントリの作成</span><span class="sxs-lookup"><span data-stu-id="afe31-225">• Create Time Entry</span></span>|<span data-ttu-id="afe31-226">• 私の日付別の時間エントリ</span><span class="sxs-lookup"><span data-stu-id="afe31-226">• My Time Entries By Date</span></span><br><span data-ttu-id="afe31-227">• 私の今週の時間エントリ</span><span class="sxs-lookup"><span data-stu-id="afe31-227">• My time Entries for this week</span></span><br><span data-ttu-id="afe31-228">• 承認待ちの時間エントリ</span><span class="sxs-lookup"><span data-stu-id="afe31-228">• Time entries for approval</span></span>|
|  <span data-ttu-id="afe31-229">仕訳帳明細行</span><span class="sxs-lookup"><span data-stu-id="afe31-229">Journal Line</span></span>|<span data-ttu-id="afe31-230">• 情報</span><span class="sxs-lookup"><span data-stu-id="afe31-230">• Information</span></span><br><span data-ttu-id="afe31-231">• 簡易作成</span><span class="sxs-lookup"><span data-stu-id="afe31-231">• Quick create</span></span>|<span data-ttu-id="afe31-232">• アクティブな仕訳帳明細行</span><span class="sxs-lookup"><span data-stu-id="afe31-232">• Active journal lines</span></span><br><span data-ttu-id="afe31-233">• 仕訳帳明細行関連ビュー</span><span class="sxs-lookup"><span data-stu-id="afe31-233">• Journal Line associated view</span></span>|
|  <span data-ttu-id="afe31-234">請求明細行の詳細</span><span class="sxs-lookup"><span data-stu-id="afe31-234">Invoice Line Detail</span></span>|<span data-ttu-id="afe31-235">• 情報</span><span class="sxs-lookup"><span data-stu-id="afe31-235">• Information</span></span><br><span data-ttu-id="afe31-236">• 簡易作成</span><span class="sxs-lookup"><span data-stu-id="afe31-236">• Quick create</span></span>|<span data-ttu-id="afe31-237">• アクティブな請求明細行の詳細</span><span class="sxs-lookup"><span data-stu-id="afe31-237">• Active Invoice Line Details</span></span><br><span data-ttu-id="afe31-238">• 請求可能な請求トランザクション</span><span class="sxs-lookup"><span data-stu-id="afe31-238">• Chargeable Invoice Transactions</span></span><br><span data-ttu-id="afe31-239">• 無料請求トランザクション</span><span class="sxs-lookup"><span data-stu-id="afe31-239">• Complimentary Invoice Transactions</span></span><br><span data-ttu-id="afe31-240">• 請求明細行の詳細関連ビュー</span><span class="sxs-lookup"><span data-stu-id="afe31-240">• Invoice Line Detail associated view</span></span><br><span data-ttu-id="afe31-241">• 請求不可の請求トランザクション</span><span class="sxs-lookup"><span data-stu-id="afe31-241">• Non-Chargeable Invoice Transactions</span></span>|
|  <span data-ttu-id="afe31-242">実績</span><span class="sxs-lookup"><span data-stu-id="afe31-242">Actual</span></span>|<span data-ttu-id="afe31-243">• 情報</span><span class="sxs-lookup"><span data-stu-id="afe31-243">• Information</span></span><br><span data-ttu-id="afe31-244">• アクティブな実績</span><span class="sxs-lookup"><span data-stu-id="afe31-244">• Active Actuals</span></span>|<span data-ttu-id="afe31-245">• 実績関連ビュー</span><span class="sxs-lookup"><span data-stu-id="afe31-245">• Actual Associated view</span></span>|

<span data-ttu-id="afe31-246">定義した内容によっては、カスタム フィールドをビジネス ルールに追加する必要となる場合があります。</span><span class="sxs-lookup"><span data-stu-id="afe31-246">Custom fields may also need to be added on business rules depending on what you have defined.</span></span> <span data-ttu-id="afe31-247">デフォルトのビジネス ルールの例としては **ステータスに基づく時間エントリの編集可能性** があります。</span><span class="sxs-lookup"><span data-stu-id="afe31-247">One out-of-the-box example is for the business rule **Editability of Time Entry based on status**.</span></span> <span data-ttu-id="afe31-248">このルールでは、時間エントリが **承認済** などの編集不可ステータスの場合にロックする必要があるフィールドを定義します。</span><span class="sxs-lookup"><span data-stu-id="afe31-248">This rule defines which fields need to be locked when the Time Entry is in a non-editable status such as **Approved**.</span></span> <span data-ttu-id="afe31-249">時間エントリのステータスが **下書き** または **差し戻し** 以外の場合、フィールドがロックされて編集されないように、このビジネス ルールにフィールドを追加します。</span><span class="sxs-lookup"><span data-stu-id="afe31-249">Add fields to this business rule so that the fields are locked for editing when the Time Entry is in a status other than **Draft** or **Returned**.</span></span>

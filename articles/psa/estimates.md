---
title: 見積もり
description: このトピックでは、 Dynamics 365 Project Service Automation での見積もりに関する情報を提供します。
author: rumant
manager: kfend
ms.service: dynamics-365-customerservice
ms.custom:
- dyn365-projectservice
ms.date: 1/31/2019
ms.topic: article
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.openlocfilehash: e21511f78d92ff672e462f63f0dd0d098578516a
ms.sourcegitcommit: 5c4c9bf3ba018562d6cb3443c01d550489c415fa
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/16/2020
ms.locfileid: "4079470"
---
# <a name="estimates"></a>見積もり

[!INCLUDE[cc-applies-to-psa-app-3.x](../includes/cc-applies-to-psa-app-3x.md)]

プロジェクトベースの見積りでは、見積明細詳細エンティティを使用して、プロジェクトの提供に必要な作業を見積もることができます。 顧客とその見積もりを共有することができます。

プロジェクトベースの見積明細には、見積明細詳細は必要ありません。 または、見積明細の詳細を多数含めることもできます。 見積明細詳細は、時間、費用または手数料の見積に使用されます。 PSAでは、見積明細詳細の原料の見積はできません。 これらはトランザクション クラスと呼ばれます。 見積税額はトランザクション クラスにも入力できます。

トランザクション クラスに加えて、見積明細詳細にもトランザクション タイプがあります。 PSAは、見積明細詳細に2つのトランザクション タイプに対応しています: **コスト** および **プロジェクト契約** です。

## <a name="estimate-by-using-a-contract"></a>契約を使用した見積もり

プロジェクトベースの契約を作成するときにPSA見積もりを使用した場合は、見積もりの各見積明細に対して行った見積がプロジェクト契約にコピーされます。 プロジェクト契約の構造は、明細、明細詳細および請求書予定があるプロジェクト見積もりの構造と共通しています。

見積もりは、プロジェクト見積もりの場合と同様に、プロジェクト契約で直接実行することができます。 プロジェクト見積もりの場合、見積もりは契約明細と契約明細詳細を使用して行われます。 契約明細の詳細は、ボトムアップ見積もりアプローチを使用して作成されたプロジェクト計画からも生成することができます。

契約明細の詳細を使用して、時間、費用または手数料を見積ることができます。 見積もり税額は、契約明細詳細にも入力できます。

PSAでは、契約明細詳細の原料見積はできません。

プロジェクト契約で対応している処理は、請求書の作成と確認です。 請求書作成では、現在日までのすべての未請求販売実績を含むプロジェクト基準請求書のドラフトが作成されます。

確認することにより、契約が読取り専用になり、ステータスが **下書き** から **確認済** に変更されます。 この操作を行った後は、元に戻すことはできません。 この操作はやり直すことが出来ないため、契約を **下書き** ステータスのままにしておくことを推奨します。

下書き契約と確定契約の唯一の違いはそのステータスです。下書き契約は編集することができますが確定契約は編集することができません。 請求書の作成と実績の追跡は、下書き契約と確認済契約の両方で実行することができます。

PSAでは、契約またはプロジェクトの受注変更に対応していません。

## <a name="estimating-projects"></a>見積もりプロジェクト

プロジェクトの時間と費用を見積もることができます。 PSAは、プロジェクトの原料や費用の見積もりに対応していません。

時間の見積もりが生成されるタイミングは、タスクを作成し、タスクの実行に必要な標準リソースの属性を識別するときです。 時間の見積もりはスケジュール タスクから生成されます。 スケジュールのコンテキスト外で汎用的なチームメンバーを作成した場合、時間の見積もりは作成されません。

経費の予測が **見積もり** ページのグリッドに入力されます。

## <a name="understanding-estimation"></a>見積もりを理解する

以下の表を参考にして、見積り段階のビジネス ロジックを理解してください。

| シナリオ                                                                                                                                                                                                                                                                                                                                          | エンティティ レコード                                                                                                                                                                                                       | トランザクションの種類 | トランザクション クラス | 追加情報                                                            |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------|-------------|-----------------------------------------------------------------------------------|
| 見積り時間の売上価値を見積もる必要がある場合                                                                                                                                                                                                                                                                                    | 見積明細詳細(QLD) が作成されます                                                                                                                                                                               | プロジェクト契約 | Time        | 売上側のQLD行にある 「取引発生元」 フィールドは、原価側のQLDを参照します。 |
|                                                                                                                                                                                                                                                                                     | システムによって2番目のQLDレコードが作成され、ここには対応する原価値が格納されます。 すべての金銭が関連しないフィールドは、システムによって売上QLDから原価QLDにコピーされます。                                                                                                                                                                               | コスト | Time        | 売上側の見積明細詳細 (QLD) 行の取引元フィールドは、原価側のQLDを参照します。 |
| 契約時間の売上価値を見積もる必要がある場合                                                                                                                                                                                                                                                                                 | プロジェクト契約明細詳細 (CLD) レコードが作成されます                                                                                                                                                                    | プロジェクト契約 | Time        | 売上側のQLD行にある 「取引発生元」 フィールドは、原価側のQLDを参照します。      |
|                                                                                                                                                                                                                                                                                  | システムによって2番目のQLDレコードが作成され、ここには対応する原価値が格納されます。 すべての金銭が関連しないフィールドは、システムによって売上QLDから原価QLDにコピーされます。                                                                                                                                                                    | コスト | Time        | 売上側のQLD行にある 「取引発生元」 フィールドは、原価側のQLDを参照します。      |
| ユーザーがプロジェクトタスクのリソースを説明する場合                                                                                                                                                                                                                                                                                            | すべての必須となっている価格設定ディメンションでタスクを作成すると、タスクの売上値を示す予測ラインのレコードが作成されます。 役割と組織単位は、OOB Project Service の価格設定ディメンションです | プロジェクト契約 | Time        |                                                                                   |
|     | すべての必須となっている価格設定ディメンションでタスクを作成すると、タスクの原価値を示す予測ラインのレコードが作成されます。 すべての金銭が関連しないフィールドは、システムによって売上予測ラインから原価予測ラインにコピーされます。 役割と組織単位は、OOB PSA価格設定ディメンションであり、原価レートと請求レートの両方に対応しています。                                                                                                                                                                                                                | コスト             | Time           |                                                                                   |



## <a name="customizing-the-quote-line-detail-and-contract-line-detail-entities"></a>見積品目詳細エンティティと契約品目詳細エンティティのカスタマイズ

見積明細詳細にカスタム フィールドを追加し、作成される関連する原価明細にフィールドの値を既定値として自動入力する場合は、PreOperationContractLineDetailUpdate および PreOperationQuoteLineDetailUpdate プラグイン登録ツールを使用します。 これらのプラグインは、見積明細詳細または契約明細詳細の変更後に再登録する必要があります。 このプロセスを完了するには、以下の手順に従ってください。

1. PluginRegistrationTool を開いて、オンライン インスタンスに接続します。
2. **検索** を選択し、更新するプラグインを検索します。

    ![ツリーのダイアログ ボックスを検索する](media/basic-guide-19.png)

3. プラグインを選択し、メイン ページで **選択する** を選択します。
4. 更新をするプラグインのステップを選んで右クリックし、 **更新** を選択します。

    ![プラグインのステップを選択する](media/basic-guide-20.png)

5. **既存の手順の更新** ダイアログ ボックスで、 **属性をフィルタする** フィールドの省略記号(...)ボタン ( **...** ) を選択します:
 
    ![既存の手順の更新 ダイアログボックス](media/basic-guide-21.png)

6. **属性の選択** ダイアログ ボックスで、カスタム属性のチェックボックスを選択します。

    ![属性を選択ダイアログボックス](media/basic-guide-22.png)

7. **OK** を選択してダイアログボックスを閉じ、 **手順の更新** を選択します。
 
    ![手順ボタンの更新](media/basic-guide-23.png)

8. さらにプラグインを更新するには、手順1 から 7を繰り返します。
9. プラグイン登録ツールを閉じます。

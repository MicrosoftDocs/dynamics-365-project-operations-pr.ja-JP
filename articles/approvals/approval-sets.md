---
title: 承認セット
description: このトピックは、承認セット、リクエスト、およびそれらの操作のサブセットを使用する方法を説明しています。
author: stsporen
ms.date: 02/01/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: stsporen
ms.openlocfilehash: 6809e01d8c3c93841125d0100d898dc208577019
ms.sourcegitcommit: c0792bd65d92db25e0e8864879a19c4b93efb10c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/14/2022
ms.locfileid: "8576230"
---
# <a name="approval-sets"></a>承認セット

_**適用対象 :** リソース/非在庫ベースのシナリオに使用するプロジェクト オペレーション、見積請求に対応する小規模のデプロイ_

承認セットは、承認要求を操作のより小さなサブセットにグループ化します。 このグループ化により、承認を特定の順序でプロジェクトごとに処理し、再試行と順序付けを行うことができるようになります。 承認リクエストをグループ化してまとめると、大量の承認に対する承認処理の信頼性と追跡可能性が向上します。

承認セットは、関連するレコードの全体的な処理状態を示します。 承認セットを使用して承認レコードが処理されると、レコードは **提出済み** から **承認済み** に移動し、承認セットへのリンクが解除されます。 承認のために提出されたときにレコードが失敗した場合、レコードの状態は **提出済み** のままで、承認セットは失敗としてマークされます。 承認セットには、失敗のエラー メッセージが記録されます。

## <a name="processing-approvals-and-approval-sets"></a>処理中の承認と承認セット
処理待ちの承認は、**処理中の承認** ビューに表示されます。 システムは、以前の試行が失敗した場合の承認の再試行を含め、すべてのエントリを非同期で複数回処理します。

**承認セットの有効期間** フィールドには、セットが失敗としてマークされるまでに残された処理の試行回数が記録されます。

承認セットは、**Project Service - プロジェクト承認セットを定期的にスケジュールする** の **クラウド フロー** に基づく定期的なアクティブ化によって処理されます。 これは **Project Operations** という名前の **ソリューション** にあります。 

次の手順を実行して、フローがアクティブになっていることを確認します。

1. 管理者として、[flow.microsoft.com](https://powerautomate.microsoft.com) にログインします。
2. 右上隅で、Dynamics 365 Project Operations に使う環境に切り替えます。
3. **ソリューション** を選択するして、環境にインストールされているソリューションを一覧表示します。
4. ソリューションのリストで、**Project Operations** を選択します。
5. フィルターを **すべて** から **クラウド フロー** に変更します。
6. **Project Service – プロジェクト承認セットを定期的にスケジュールする** フローが **オン** になっていることを確認します。 そうでない場合は、フローを選択してから、**オンにする** を選択します。
7. Project Operations Dataverse 環境の **設定** エリアにある **システム ジョブ** のリストを確認し、5 分ごとに処理が行われることを確認します。

## <a name="failed-approvals-and-approval-sets"></a>失敗した承認と承認セット
**失敗した承認** ビューには、ユーザーの介入が必要なすべての承認が一覧表示されます。 関連する承認セットのログを開いて、失敗の原因を特定します。
**再試行** を選択すると、承認セットの有効期間カウントが追加され、承認セット状態が **処理中** に戻り、残りのレコードの処理を試みます。

## <a name="configure-approval-sets"></a>承認セットの構成

### <a name="enable-the-approval-sets-feature"></a>承認セット機能を有効にする
承認セット機能を有効にする前に、現在処理中の承認がないことを確認してください。

- **プロジェクト パラメーター** ページに移動し、**機能コントロール** > **最新の承認を有効にする** を選択します。

### <a name="turn-off-the-approval-sets-feature"></a>承認セット機能を無効にする
承認セット機能を無効にする前に、現在処理中の承認がないことを確認してください。

- **プロジェクト パラメーター** ページに移動し、**機能コントロール** > **最新の承認を無効にする** を選択します。

### <a name="configuring-the-asynchronous-threshold"></a>非同期しきい値を構成する 
承認セットを作成すると、承認のために選択したレコード数が指定されたしきい値を超えると、処理はバックグラウンドに移動します。 **非同期しきい値** フィールドを使用して、承認処理を同期または非同期で実行する時期を構成します。 次の値のいずれかを選択します。

  - ゼロ: すべての要求は非同期に処理されます。 
  - 0 より大きい数値: 承認は、提出された承認の数がこの値を超えた場合にのみ非同期に処理されます。

[!INCLUDE[footer-include](../includes/footer-banner.md)]
